(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9090],{93946:function(e,t,r){"use strict";r.d(t,{Z:function(){return w}});var o=r(63366),n=r(87462),a=r(67294),l=r(86010),i=r(94780),s=r(41796),c=r(90948),u=r(71657),d=r(82607),f=r(98216),g=r(1588),h=r(34867);function p(e){return(0,h.Z)("MuiIconButton",e)}let m=(0,g.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);var v=r(85893);let Z=["edge","children","className","color","disabled","disableFocusRipple","size"],b=e=>{let{classes:t,disabled:r,color:o,edge:n,size:a}=e,l={root:["root",r&&"disabled","default"!==o&&`color${(0,f.Z)(o)}`,n&&`edge${(0,f.Z)(n)}`,`size${(0,f.Z)(a)}`]};return(0,i.Z)(l,p,t)},x=(0,c.ZP)(d.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:r}=e;return[t.root,"default"!==r.color&&t[`color${(0,f.Z)(r.color)}`],r.edge&&t[`edge${(0,f.Z)(r.edge)}`],t[`size${(0,f.Z)(r.size)}`]]}})(({theme:e,ownerState:t})=>(0,n.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!t.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,s.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===t.edge&&{marginLeft:"small"===t.size?-3:-12},"end"===t.edge&&{marginRight:"small"===t.size?-3:-12}),({theme:e,ownerState:t})=>{var r;let o=null==(r=(e.vars||e).palette)?void 0:r[t.color];return(0,n.Z)({},"inherit"===t.color&&{color:"inherit"},"inherit"!==t.color&&"default"!==t.color&&(0,n.Z)({color:null==o?void 0:o.main},!t.disableRipple&&{"&:hover":(0,n.Z)({},o&&{backgroundColor:e.vars?`rgba(${o.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,s.Fq)(o.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===t.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===t.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${m.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),y=a.forwardRef(function(e,t){let r=(0,u.Z)({props:e,name:"MuiIconButton"}),{edge:a=!1,children:i,className:s,color:c="default",disabled:d=!1,disableFocusRipple:f=!1,size:g="medium"}=r,h=(0,o.Z)(r,Z),p=(0,n.Z)({},r,{edge:a,color:c,disabled:d,disableFocusRipple:f,size:g}),m=b(p);return(0,v.jsx)(x,(0,n.Z)({className:(0,l.Z)(m.root,s),centerRipple:!0,focusRipple:!f,disabled:d,ref:t,ownerState:p},h,{children:i}))});var w=y},1132:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/profile/dialog",function(){return r(15517)}])},53233:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var o=r(11802),n=r(36100);let a=(0,n.ad)(o.Z);async function l(e,t,r){let o=null,l=null;if(r.catalog_id){let e=(0,n.JU)(a,"catalog",r.catalog_id);r.catalog_id=e}try{o=await (0,n.pl)((0,n.JU)(a,e,t),r,{merge:!0}),console.log("แก้ไขสำเร็จ",o)}catch(e){console.error("เกิดข้อผิดพลาดในการแก้ไขข้อมูล:",l=e)}return{result:o,error:l}}},49925:function(e,t,r){"use strict";r.d(t,{EC:function(){return s},Eq:function(){return u},KL:function(){return c},PR:function(){return d},ZP:function(){return l},_N:function(){return i},wv:function(){return f}});var o=r(11802),n=r(36100);let a=(0,n.ad)(o.Z);async function l(e,t){let r=(0,n.JU)(a,e,t);try{let e=await (0,n.QT)(r);return{result:e,error:null}}catch(e){return{result:null,error:e}}}let i=async e=>{let t=await (0,n.PL)((0,n.hJ)(a,e));return{result:t,error:null}},s=async(e,t)=>{let r=(0,n.JU)(a,"catalog",t),o=(0,n.IO)((0,n.hJ)(a,e),(0,n.ar)("catalog_id","==",r)),l=await (0,n.PL)(o);return{result:l,error:null}},c=async e=>{let t=[];for(let r of e){let e=await (0,n.QT)((0,n.JU)(a,"products",r));if(e.exists()){let o=e.data(),n={id:r,...o};t.push(n)}}return t},u=async e=>{let t=[];for(let r of e){let e=await (0,n.QT)((0,n.JU)(a,"colors",r));if(e.exists()){let o=e.data(),n={id:r,...o};t.push(n)}}return t},d=async(e,t)=>{let r=(0,n.IO)((0,n.hJ)(a,e),(0,n.ar)("uid","==",String(t))),o=await (0,n.PL)(r);return o.forEach(e=>{console.log(e.id," => ",e.data())}),{result:o,error:null}},f=async(e,t)=>{let r=(0,n.JU)(a,"catalog",t),o=await (0,n.QT)(r);if(!o.exists())return console.error("Catalog document not found"),{result:null,error:"Catalog document not found"};let l=(0,n.IO)((0,n.hJ)(a,e),(0,n.ar)("catalog_id","==",r));try{let e=await (0,n.PL)(l);return e.forEach(e=>{console.log(e.id," => ",e.data())}),{result:e,error:null}}catch(e){return console.error("Error getting products: ",e),{result:null,error:e}}}},15517:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var o=r(85893),n=r(67294),a=r(46901),l=r(50657),i=r(37645),s=r(58703),c=r(6514),u=r(10945),d=r(31425),f=r(83321),g=r(50838),h=r(49925),p=r(11163),m=r(53233);function v(e){let{handleClickOpen:t,onFormSubmitSuccess:r}=e,[v,Z]=n.useState(!1),[b,x]=n.useState(!1),[y,w]=n.useState(""),[C,S]=n.useState(""),[_,z]=n.useState(""),[R,j]=n.useState(null),k=(0,g.Eu)();(0,p.useRouter)();let E=async()=>{Z(!0),t(),await $()},J=()=>{Z(!1)},P=async e=>{e.preventDefault(),console.log("Handling form submission"),J();let t={email:_,name:y,tel:C};console.log("Submitting form with data:",t);let{result:n,error:l}=await (0,m.Z)("users",k.user.uid,t);console.log("Result:",n),console.log("Error:",l),l?(j((0,o.jsx)(a.Z,{severity:"error",children:"ผิดพลาด! ไม่สามารถแก้ไข้ข้อมูลได้"})),x(!0)):(j((0,o.jsx)(a.Z,{severity:"success",children:"แก้ไข้ข้อมูลสำเร็จ"})),r(),x(!0))},$=async()=>{let e=k.user.uid,{result:t,error:r}=await (0,h.PR)("users",e);if(r)console.error("Error fetching document:",r);else if(t.docs.length>0){let e=t.docs[0].data();w(e.name),z(e.email),S(e.tel)}};return n.useEffect(()=>{$()},[]),(0,o.jsxs)(n.Fragment,{children:[(0,o.jsxs)(l.Z,{open:v,onClose:J,children:[(0,o.jsx)(i.Z,{sx:{fontWeight:"bold"},children:"แก้ไขข้อมูลส่วนตัว"}),(0,o.jsx)(s.Z,{open:v,autoHideDuration:6e3,onClose:(e,t)=>{"clickaway"!==t&&x(!1)},children:R}),(0,o.jsxs)("form",{onSubmit:P,className:"form",children:[(0,o.jsxs)(c.Z,{children:[(0,o.jsx)(u.Z,{variant:"outlined",value:String(y),label:"ชื่อ",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>w(e.target.value)}),(0,o.jsx)(u.Z,{variant:"outlined",value:String(_),label:"อีเมล",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>z(e.target.value)}),(0,o.jsx)(u.Z,{variant:"outlined",label:"เบอร์ติดต่อ",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>S(e.target.value),value:String(C)})]}),(0,o.jsxs)(d.Z,{children:[(0,o.jsx)(f.Z,{variant:"outlined",onClick:J,sx:{borderColor:"#018294",color:"#018294",mb:4,"&:hover":{backgroundColor:"#018294",color:"#fff"}},children:"ยกเลิก"}),(0,o.jsx)(f.Z,{variant:"contained",sx:{backgroundColor:"#018294",color:"#fff",mb:4,"&:hover":{backgroundColor:"#01576e"}},type:"submit",children:"บันทึก"})]})]})]}),(0,o.jsx)(f.Z,{sx:{color:"#018294"},onClick:E,children:"แก้ไข"})]})}},11163:function(e,t,r){e.exports=r(96885)}},function(e){e.O(0,[2607,9078,6298,945,4792,6792,9774,2888,179],function(){return e(e.s=1132)}),_N_E=e.O()}]);