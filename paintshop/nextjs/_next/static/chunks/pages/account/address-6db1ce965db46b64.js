(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6014],{19693:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/address",function(){return i(87761)}])},5371:function(e,n,i){"use strict";i.d(n,{Z:function(){return o}});var t=i(11802),s=i(36100);let l=(0,s.ad)(t.Z);async function o(e,n,i){let t=null;try{let t={address:i.address,province:i.provinceName,amphure:i.amphureName,tambon:i.tambonName,zipcode:i.zipCode},o=(0,s.JU)(l,e,n);await (0,s.r7)(o,{addresses:(0,s.vr)(t)}),console.log("เพิ่มข้อมูลสำเร็จ")}catch(e){console.error("เกิดข้อผิดพลาดในการเพิ่มข้อมูล:",t=e)}return{result:null,error:t}}},46492:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return f}});var t=i(85893),s=i(67294),l=i(83321),o=i(50657),r=i(37645),d=i(6514),a=i(86886),c=i(10945),u=i(43665),h=i(31425),x=i(5371),m=i(50838);function f(){let[e,n]=s.useState(!1),[i,f]=s.useState(null),[p,j]=s.useState([]),[Z,v]=s.useState([]),[b,_]=s.useState([]),[g,w]=s.useState(void 0),[C,P]=s.useState(void 0),[S,k]=s.useState(void 0),[y,E]=s.useState(void 0),[W,z]=s.useState(void 0),N=(0,m.Eu)(),[O,F]=s.useState({province_id:void 0,amphure_id:void 0,tambon_id:void 0});s.useEffect(()=>{var e,n,i,t,s,l;if(console.log(O),p){let i=null===(e=p.find(e=>e.id===O.province_id))||void 0===e?void 0:e.amphure;v(i);let t=null===(n=p.find(e=>e.id===O.province_id))||void 0===n?void 0:n.name_th;P(t)}if(Z){let e=null===(i=Z.find(e=>e.id===O.amphure_id))||void 0===i?void 0:i.tambon;_(e);let n=null===(t=Z.find(e=>e.id===O.amphure_id))||void 0===t?void 0:t.name_th;k(n)}if(b){let e=null===(s=b.find(e=>e.id===O.tambon_id))||void 0===s?void 0:s.name_th,n=null===(l=b.find(e=>e.id===O.tambon_id))||void 0===l?void 0:l.zip_code;E(e),w(n)}},[O,p,Z,b]),console.log("ทดสอบ",i,C,S,y,g),s.useEffect(()=>{fetch("https://raw.githubusercontent.com/kongvut/thai-province-data/master/api_province_with_amphure_tambon.json",{method:"GET",redirect:"follow"}).then(e=>e.json()).then(e=>{j(e)}).catch(e=>console.log("error",e))},[]);let D=async e=>{e.preventDefault(),console.log("Handling form submission"),I();let n={address:i,provinceName:C,amphureName:S,tambonName:y,zipCode:g};console.log("Submitting form with data:",n);let{result:t,error:s}=await (0,x.Z)("users",N.user.uid,n)},I=()=>{n(!1)};return(0,t.jsxs)(s.Fragment,{children:[(0,t.jsx)(l.Z,{onClick:()=>{n(!0)},sx:{color:"#018294"},children:"เพิ่มที่อยู่"}),(0,t.jsxs)(o.Z,{open:e,onClose:I,children:[(0,t.jsx)(r.Z,{sx:{fontWeight:"bold"},children:"ที่อยู่จัดส่ง"}),(0,t.jsxs)("form",{onSubmit:D,className:"form",children:[(0,t.jsx)(d.Z,{children:(0,t.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(a.ZP,{xs:12,item:!0,children:(0,t.jsx)(c.Z,{variant:"outlined",label:"บ้านเลขที่",fullWidth:!0,multiline:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>f(e.target.value)})}),(0,t.jsx)(a.ZP,{xs:12,sm:6,item:!0,children:(0,t.jsx)(u.Z,{disablePortal:!0,options:p,getOptionLabel:e=>e.name_th,onChange:(e,n)=>{F(e=>({...e,province_id:n?n.id:void 0,amphure_id:void 0,tambon_id:void 0}))},fullWidth:!0,required:!0,size:"small",renderInput:e=>(0,t.jsx)(c.Z,{...e,label:"จังหวัด"})})}),(0,t.jsx)(a.ZP,{xs:12,sm:6,item:!0,children:(0,t.jsx)(u.Z,{disablePortal:!0,options:Z||[],getOptionLabel:e=>e.name_th,onChange:(e,n)=>{F(e=>({...e,amphure_id:n?n.id:void 0,tambon_id:void 0}))},fullWidth:!0,size:"small",renderInput:e=>(0,t.jsx)(c.Z,{...e,label:"อำเภอ/เขต"})})}),(0,t.jsx)(a.ZP,{xs:12,sm:6,item:!0,children:(0,t.jsx)(u.Z,{disablePortal:!0,options:b||[],getOptionLabel:e=>e.name_th,onChange:(e,n)=>{F(e=>({...e,tambon_id:n?n.id:void 0}))},fullWidth:!0,size:"small",renderInput:e=>(0,t.jsx)(c.Z,{...e,label:"ตำบล"})})}),(0,t.jsx)(a.ZP,{xs:12,sm:6,item:!0,children:(0,t.jsx)(c.Z,{variant:"outlined",label:"รหัสไปรษณีย์",value:g||"",fullWidth:!0,required:!0,size:"small"})})]})}),(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(l.Z,{variant:"outlined",onClick:I,sx:{borderColor:"#018294",color:"#018294",mb:4,"&:hover":{backgroundColor:"#018294",color:"#fff"}},children:"ยกเลิก"}),(0,t.jsx)(l.Z,{variant:"contained",sx:{backgroundColor:"#018294",color:"#fff",mb:4,"&:hover":{backgroundColor:"#01576e"}},type:"submit",children:"บันทึก"})]})]})]})]})}},87761:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return k}});var t=i(85893),s=i(67294),l=i(17576),o=i(49505),r=i(87357),d=i(65582),a=i(12963),c=i(15861),u=i(86886),h=i(72882),x=i(90629),m=i(7906),f=i(53184),p=i(53816),j=i(98102),Z=i(295),v=i(83321),b=i(41664),_=i.n(b),g=i(11163),w=i(50838),C=i(49925),P=i(46492);function S(e){e.preventDefault(),console.info("You clicked a breadcrumb.")}function k(){(0,g.useRouter)();let e=(0,w.Eu)(),[n,i]=s.useState(null);s.useEffect(()=>{b()},[]);let b=async()=>{let n=e.user.uid,{result:t,error:s}=await (0,C.PR)("users",n);if(s)console.error("Error fetching collection:",s);else{let e=t.docs.map(e=>({id:e.id,name:e.data().name,tel:e.data().tel,addresses:e.data().addresses||[]}));console.log("ทดสอบรหัสผู้ใช้",n),console.log("ทดสอบuser",e),i(e)}};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(l.Z,{children:(0,t.jsxs)(r.Z,{sx:{width:"100%"},children:[(0,t.jsx)(d.Z,{maxWidth:"false",sx:{display:"flex",justifyContent:"center",bgcolor:"#FAF8F1"},children:(0,t.jsx)(r.Z,{sx:{width:"70vw",pt:2,pb:2},children:(0,t.jsx)("div",{role:"presentation",onClick:S,children:(0,t.jsxs)(a.Z,{"aria-label":"Beger",children:[(0,t.jsx)(_(),{style:{textDecoration:"none",color:"inherit"},sx:{color:"inherit","&:hover":{textDecoration:"underline"}},href:"/homepage",children:"หน้าแรก"}),(0,t.jsx)(c.Z,{color:"text.primary",children:"บัญชีของฉัน"})]})})})}),(0,t.jsx)(d.Z,{maxWidth:!1,sx:{display:"flex",justifyContent:"center",bgcolor:"white"},children:(0,t.jsx)(r.Z,{sx:{p:3,width:"70vw"},children:(0,t.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(u.ZP,{item:!0,sm:3,xs:12,children:(0,t.jsx)(o.Z,{})}),(0,t.jsxs)(u.ZP,{item:!0,sm:9,xs:12,children:[" ",(0,t.jsxs)(u.ZP,{item:!0,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsx)(c.Z,{sx:{fontWeight:"bold",fontSize:"18px",pb:2,pt:2},children:"ที่อยู่จัดส่งสินค้า"}),(0,t.jsx)(P.default,{handleClickOpen:()=>{setOpen(!0)}})]}),(0,t.jsx)(h.Z,{component:x.Z,children:(0,t.jsxs)(m.Z,{"aria-label":"simple table",children:[(0,t.jsx)(f.Z,{children:(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(j.Z,{children:"ชื่อ"}),(0,t.jsx)(j.Z,{children:"เบอร์โทรศัพท์"}),(0,t.jsx)(j.Z,{children:"ที่อยู่"}),(0,t.jsx)(j.Z,{}),(0,t.jsx)(j.Z,{})]})}),(0,t.jsx)(Z.Z,{children:n&&n.map((e,n)=>(0,t.jsx)(s.Fragment,{children:e.addresses&&e.addresses.map((n,i)=>(0,t.jsxs)(p.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,t.jsx)(j.Z,{component:"th",scope:"row",sx:{fontWeight:"bold"},children:e.name}),(0,t.jsx)(j.Z,{children:e.tel}),(0,t.jsxs)(j.Z,{children:[n.address," อำเภอ ",n.amphure," ตำบล ",n.tambon," จังหวัด ",n.province]}),(0,t.jsxs)(j.Z,{children:[(0,t.jsx)(v.Z,{sx:{color:"#018294"},children:"แก้ไข"}),(0,t.jsx)(v.Z,{sx:{color:"#018294"},children:"ลบ"})]})]},i))},n))})]})})]})]})})})]})})})}}},function(e){e.O(0,[2607,9078,7393,6298,6886,505,3717,3914,945,7451,6792,6078,7199,3665,8945,5593,9774,2888,179],function(){return e(e.s=19693)}),_N_E=e.O()}]);