(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1783],{85083:function(t,r,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/catalogadmin",function(){return e(91051)}])},49925:function(t,r,e){"use strict";e.d(r,{EC:function(){return l},Eq:function(){return u},KL:function(){return c},PR:function(){return d},ZP:function(){return i},_N:function(){return s},wv:function(){return h}});var n=e(11802),a=e(36100);let o=(0,a.ad)(n.Z);async function i(t,r){let e=(0,a.JU)(o,t,r);try{let t=await (0,a.QT)(e);return{result:t,error:null}}catch(t){return{result:null,error:t}}}let s=async t=>{let r=await (0,a.PL)((0,a.hJ)(o,t));return{result:r,error:null}},l=async(t,r)=>{let e=(0,a.JU)(o,"catalog",r),n=(0,a.IO)((0,a.hJ)(o,t),(0,a.ar)("catalog_id","==",e)),i=await (0,a.PL)(n);return{result:i,error:null}},c=async t=>{let r=[];for(let e of t){let t=await (0,a.QT)((0,a.JU)(o,"products",e));if(t.exists()){let n=t.data(),a={id:e,...n};r.push(a)}}return r},u=async t=>{let r=[];for(let e of t){let t=await (0,a.QT)((0,a.JU)(o,"colors",e));if(t.exists()){let n=t.data(),a={id:e,...n};r.push(a)}}return r},d=async(t,r)=>{let e=(0,a.IO)((0,a.hJ)(o,t),(0,a.ar)("uid","==",String(r))),n=await (0,a.PL)(e);return n.forEach(t=>{console.log(t.id," => ",t.data())}),{result:n,error:null}},h=async(t,r)=>{let e=(0,a.JU)(o,"catalog",r),n=await (0,a.QT)(e);if(!n.exists())return console.error("Catalog document not found"),{result:null,error:"Catalog document not found"};let i=(0,a.IO)((0,a.hJ)(o,t),(0,a.ar)("catalog_id","==",e));try{let t=await (0,a.PL)(i);return t.forEach(t=>{console.log(t.id," => ",t.data())}),{result:t,error:null}}catch(t){return console.error("Error getting products: ",t),{result:null,error:t}}}},726:function(t,r,e){"use strict";e.d(r,{Z:function(){return i}});var n=e(36100),a=e(11802);let o=(0,n.ad)(a.Z);async function i(t,r,e){try{let a=r.toLowerCase(),i=e.toLowerCase(),s=(0,n.IO)((0,n.hJ)(o,t),(0,n.Xo)(a)),l=await (0,n.PL)(s),c=l.docs.filter(t=>{let r=t.data()[a];return r&&-1!==r.toLowerCase().indexOf(i)}).map(t=>({id:t.id,...t.data()}));return c}catch(t){throw console.error("Error searching data:",t),t}}},91051:function(t,r,e){"use strict";e.r(r),e.d(r,{default:function(){return E}});var n=e(85893),a=e(67294),o=e(87357),i=e(98010),s=e(68239),l=e(22430),c=e(15861),u=e(10945),d=e(87109),h=e(83321),f=e(86886),x=e(66242),m=e(9974),g=e(83965),p=e(44267),w=e(42761);e(49925);var Z=e(11163),j=e(23279),y=e.n(j),_=e(726);function E(){let t=(0,s.Z)({palette:{primary:{main:"#018294"},success:{main:"#A9C470"},error:{main:"#FE616A"}}}),[r,e]=(0,a.useState)(null),[j,E]=(0,a.useState)("");(0,a.useEffect)(()=>{v("")},[]),(0,a.useEffect)(()=>{},[r]);let C=y()(async t=>{try{let r=await (0,_.Z)("catalog","name",t);e(r)}catch(t){console.error("Error searching data:",t)}},500),v=t=>{E(t),C(t)},P=(0,Z.useRouter)();return(0,n.jsx)(i.Z,{children:(0,n.jsx)(l.Z,{theme:t,children:(0,n.jsxs)(o.Z,{sx:{minHeight:"70vh",width:"100%",mt:5,mb:3},children:[(0,n.jsx)(c.Z,{sx:{fontSize:"2rem",fontWeight:"600"},children:"แคตตาล็อค"}),(0,n.jsx)(o.Z,{sx:{mt:1},children:(0,n.jsx)(u.Z,{label:"ค้นหา",variant:"outlined",size:"small",onChange:t=>v(t.target.value),InputProps:{startAdornment:(0,n.jsx)(d.Z,{position:"start",children:(0,n.jsx)(w.Z,{sx:{fontSize:"1.4rem"}})})}})}),(0,n.jsx)(o.Z,{sx:{display:"flex",justifyContent:{xl:"flex-end"},width:"98%"},children:(0,n.jsx)(h.Z,{variant:"contained",color:"success",onClick:function(){P.push("/catalogadmin/addcatalog")},sx:{mt:1},children:"เพิ่มแค็ตตาล็อก"})}),(0,n.jsx)(o.Z,{sx:{height:"100%",backgroundColor:"#fff",p:2,mt:2,boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)",borderRadius:"5px"},children:(0,n.jsx)(f.ZP,{container:!0,spacing:2,children:r&&r.map(t=>(0,n.jsx)(f.ZP,{item:!0,xs:12,sm:6,md:4,children:(0,n.jsx)(x.Z,{sx:{maxWidth:400},onClick:()=>{var r;return r=t.id,void P.push({pathname:"/catalogadmin/editcatalog",query:{catalog_id:JSON.stringify(r)}})},children:(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(g.Z,{component:"img",height:"200",src:t.img,alt:"ภาพ"}),(0,n.jsx)(p.Z,{children:(0,n.jsx)(c.Z,{gutterBottom:!0,variant:"h5",component:"div",sx:{color:"#018294",fontSize:{xs:"1rem",sm:"1rem",md:"1.5rem"}},children:t.name})})]})})},t.id))})})]})})})}}},function(t){t.O(0,[2607,9078,7393,6298,6886,505,3717,3914,945,131,8010,9774,2888,179],function(){return t(t.s=85083)}),_N_E=t.O()}]);