(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2771],{31178:function(e,n,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/profile",function(){return s(97331)}])},53233:function(e,n,s){"use strict";s.d(n,{Z:function(){return l}});var t=s(11802),i=s(36100);let r=(0,i.ad)(t.Z);async function l(e,n,s){let t=null,l=null;if(s.catalog_id){let e=(0,i.JU)(r,"catalog",s.catalog_id);s.catalog_id=e}try{t=await (0,i.pl)((0,i.JU)(r,e,n),s,{merge:!0}),console.log("แก้ไขสำเร็จ",t)}catch(e){console.error("เกิดข้อผิดพลาดในการแก้ไขข้อมูล:",l=e)}return{result:t,error:l}}},15517:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return Z}});var t=s(85893),i=s(67294),r=s(46901),l=s(50657),o=s(37645),c=s(58703),a=s(6514),d=s(10945),u=s(31425),x=s(83321),h=s(50838),m=s(49925),f=s(11163),j=s(53233);function Z(e){let{handleClickOpen:n,onFormSubmitSuccess:s}=e,[Z,p]=i.useState(!1),[b,g]=i.useState(!1),[v,E]=i.useState(""),[P,w]=i.useState(""),[y,C]=i.useState(""),[S,_]=i.useState(null),k=(0,h.Eu)();(0,f.useRouter)();let A=async()=>{p(!0),n(),await N()},W=()=>{p(!1)},F=async e=>{e.preventDefault(),console.log("Handling form submission"),W();let n={email:y,name:v,tel:P};console.log("Submitting form with data:",n);let{result:i,error:l}=await (0,j.Z)("users",k.user.uid,n);console.log("Result:",i),console.log("Error:",l),l?(_((0,t.jsx)(r.Z,{severity:"error",children:"ผิดพลาด! ไม่สามารถแก้ไข้ข้อมูลได้"})),g(!0)):(_((0,t.jsx)(r.Z,{severity:"success",children:"แก้ไข้ข้อมูลสำเร็จ"})),s(),g(!0))},N=async()=>{let e=k.user.uid,{result:n,error:s}=await (0,m.PR)("users",e);if(s)console.error("Error fetching document:",s);else if(n.docs.length>0){let e=n.docs[0].data();E(e.name),C(e.email),w(e.tel)}};return i.useEffect(()=>{N()},[]),(0,t.jsxs)(i.Fragment,{children:[(0,t.jsxs)(l.Z,{open:Z,onClose:W,children:[(0,t.jsx)(o.Z,{sx:{fontWeight:"bold"},children:"แก้ไขข้อมูลส่วนตัว"}),(0,t.jsx)(c.Z,{open:Z,autoHideDuration:6e3,onClose:(e,n)=>{"clickaway"!==n&&g(!1)},children:S}),(0,t.jsxs)("form",{onSubmit:F,className:"form",children:[(0,t.jsxs)(a.Z,{children:[(0,t.jsx)(d.Z,{variant:"outlined",value:String(v),label:"ชื่อ",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>E(e.target.value)}),(0,t.jsx)(d.Z,{variant:"outlined",value:String(y),label:"อีเมล",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>C(e.target.value)}),(0,t.jsx)(d.Z,{variant:"outlined",label:"เบอร์ติดต่อ",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>w(e.target.value),value:String(P)})]}),(0,t.jsxs)(u.Z,{children:[(0,t.jsx)(x.Z,{variant:"outlined",onClick:W,sx:{borderColor:"#018294",color:"#018294",mb:4,"&:hover":{backgroundColor:"#018294",color:"#fff"}},children:"ยกเลิก"}),(0,t.jsx)(x.Z,{variant:"contained",sx:{backgroundColor:"#018294",color:"#fff",mb:4,"&:hover":{backgroundColor:"#01576e"}},type:"submit",children:"บันทึก"})]})]})]}),(0,t.jsx)(x.Z,{sx:{color:"#018294"},onClick:A,children:"แก้ไข"})]})}},97331:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return b}});var t=s(85893),i=s(67294),r=s(17576),l=s(49505),o=s(87357),c=s(65582),a=s(12963),d=s(15861),u=s(86886),x=s(41664),h=s.n(x),m=s(15517),f=s(49925),j=s(11163),Z=s(50838);function p(e){e.preventDefault(),console.info("You clicked a breadcrumb.")}function b(){(0,j.useRouter)();let e=(0,Z.Eu)(),[n,s]=i.useState(null),[x,b]=i.useState(!1);i.useEffect(()=>{g()},[]);let g=async()=>{let n=e.user.uid,{result:t,error:i}=await (0,f.PR)("users",n);if(i)console.error("Error fetching collection:",i);else{let e=t.docs.map(e=>({id:e.id,name:e.data().name,email:e.data().email,tel:e.data().tel}));s(e)}};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(r.Z,{children:(0,t.jsxs)(o.Z,{sx:{width:"100%"},children:[(0,t.jsx)(c.Z,{maxWidth:"false",sx:{display:"flex",justifyContent:"center",bgcolor:"#FAF8F1"},children:(0,t.jsx)(o.Z,{sx:{width:"70vw",pt:2,pb:2},children:(0,t.jsx)("div",{role:"presentation",onClick:p,children:(0,t.jsxs)(a.Z,{"aria-label":"Beger",children:[(0,t.jsx)(h(),{style:{textDecoration:"none",color:"inherit"},sx:{color:"inherit","&:hover":{textDecoration:"underline"}},href:"/homepage",children:"หน้าแรก"}),(0,t.jsx)(d.Z,{color:"text.primary",children:"บัญชีของฉัน"})]})})})}),(0,t.jsx)(c.Z,{maxWidth:!1,sx:{display:"flex",justifyContent:"center",bgcolor:"white"},children:(0,t.jsx)(o.Z,{sx:{p:3,width:"70vw"},children:(0,t.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(u.ZP,{item:!0,sm:3,xs:12,children:(0,t.jsx)(l.Z,{})}),(0,t.jsxs)(u.ZP,{item:!0,sm:9,xs:12,sx:{p:2,pl:2},children:[(0,t.jsxs)(u.ZP,{item:!0,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsx)(d.Z,{sx:{fontWeight:"bold",fontSize:"18px",pb:2,pt:2},children:"ข้อมูลส่วนตัว"}),(0,t.jsx)(m.default,{handleClickOpen:()=>{b(!0)},onFormSubmitSuccess:()=>{g()}})]}),n&&n.map((e,n)=>(0,t.jsxs)(u.ZP,{children:[(0,t.jsxs)(u.ZP,{container:!0,spacing:2,sx:{mb:2,borderBottom:"1px solid #EAEAEA",pb:2},children:[(0,t.jsx)(u.ZP,{item:!0,sm:4,xs:9,children:(0,t.jsx)(d.Z,{children:"ชื่อโปรไฟล์"})}),(0,t.jsx)(u.ZP,{item:!0,sm:5,xs:9,children:(0,t.jsx)(d.Z,{children:e.name})})]}),(0,t.jsxs)(u.ZP,{container:!0,spacing:2,sx:{mb:2,borderBottom:"1px solid #EAEAEA",pb:2},children:[(0,t.jsx)(u.ZP,{item:!0,sm:4,xs:9,children:(0,t.jsx)(d.Z,{children:"เบอร์โทรศัพท์"})}),(0,t.jsx)(u.ZP,{item:!0,sm:5,xs:9,children:(0,t.jsx)(d.Z,{children:e.tel})})]}),(0,t.jsxs)(u.ZP,{container:!0,spacing:2,sx:{mb:2,borderBottom:"1px solid #EAEAEA",pb:2},children:[(0,t.jsx)(u.ZP,{item:!0,sm:4,xs:9,children:(0,t.jsx)(d.Z,{children:"อีเมล"})}),(0,t.jsx)(u.ZP,{item:!0,sm:5,xs:9,children:(0,t.jsx)(d.Z,{children:e.email})})]}),(0,t.jsxs)(u.ZP,{container:!0,spacing:2,sx:{mb:2,borderBottom:"1px solid #EAEAEA",pb:2},children:[(0,t.jsx)(u.ZP,{item:!0,sm:4,xs:9,children:(0,t.jsx)(d.Z,{children:"รหัสผ่าน"})}),(0,t.jsx)(u.ZP,{item:!0,sm:5,xs:9,children:(0,t.jsx)(d.Z,{children:"-"})})]})]},n))]})]})})})]})})})}},11163:function(e,n,s){e.exports=s(96885)}},function(e){e.O(0,[2607,9078,7393,6298,6886,505,3717,3914,945,7451,4792,6792,8945,5593,9774,2888,179],function(){return e(e.s=31178)}),_N_E=e.O()}]);