(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5095],{24148:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/employee/edit",function(){return a(45956)}])},53233:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var r=a(11802),l=a(36100);let n=(0,l.ad)(r.Z);async function i(e,t,a){let r=null,i=null;if(a.catalog_id){let e=(0,l.JU)(n,"catalog",a.catalog_id);a.catalog_id=e}try{r=await (0,l.pl)((0,l.JU)(n,e,t),a,{merge:!0}),console.log("แก้ไขสำเร็จ",r)}catch(e){console.error("เกิดข้อผิดพลาดในการแก้ไขข้อมูล:",i=e)}return{result:r,error:i}}},49925:function(e,t,a){"use strict";a.d(t,{EC:function(){return o},Eq:function(){return c},KL:function(){return u},PR:function(){return d},ZP:function(){return i},_N:function(){return s},wv:function(){return h}});var r=a(11802),l=a(36100);let n=(0,l.ad)(r.Z);async function i(e,t){let a=(0,l.JU)(n,e,t);try{let e=await (0,l.QT)(a);return{result:e,error:null}}catch(e){return{result:null,error:e}}}let s=async e=>{let t=await (0,l.PL)((0,l.hJ)(n,e));return{result:t,error:null}},o=async(e,t)=>{let a=(0,l.JU)(n,"catalog",t),r=(0,l.IO)((0,l.hJ)(n,e),(0,l.ar)("catalog_id","==",a)),i=await (0,l.PL)(r);return{result:i,error:null}},u=async e=>{let t=[];for(let a of e){let e=await (0,l.QT)((0,l.JU)(n,"products",a));if(e.exists()){let r=e.data(),l={id:a,...r};t.push(l)}}return t},c=async e=>{let t=[];for(let a of e){let e=await (0,l.QT)((0,l.JU)(n,"colors",a));if(e.exists()){let r=e.data(),l={id:a,...r};t.push(l)}}return t},d=async(e,t)=>{let a=(0,l.IO)((0,l.hJ)(n,e),(0,l.ar)("uid","==",String(t))),r=await (0,l.PL)(a);return r.forEach(e=>{console.log(e.id," => ",e.data())}),{result:r,error:null}},h=async(e,t)=>{let a=(0,l.JU)(n,"catalog",t),r=await (0,l.QT)(a);if(!r.exists())return console.error("Catalog document not found"),{result:null,error:"Catalog document not found"};let i=(0,l.IO)((0,l.hJ)(n,e),(0,l.ar)("catalog_id","==",a));try{let e=await (0,l.PL)(i);return e.forEach(e=>{console.log(e.id," => ",e.data())}),{result:e,error:null}}catch(e){return console.error("Error getting products: ",e),{result:null,error:e}}}},45956:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return b}});var r=a(85893),l=a(98010),n=a(53233),i=a(49925),s=a(46901),o=a(87357),u=a(15861),c=a(86886),d=a(83321),h=a(10945),m=a(94054),f=a(4178),g=a(25675),p=a.n(g),x=a(11163),v=a(67294);function b(){var e,t,a;let g=(0,x.useRouter)(),b=JSON.parse(g.query.employeeData),[j,_]=(0,v.useState)("/../public/default-profile.jpg"),[Z,y]=(0,v.useState)(""),[S,w]=(0,v.useState)(""),[C,E]=(0,v.useState)(""),[P,J]=(0,v.useState)(""),[U,z]=(0,v.useState)(""),[N,k]=(0,v.useState)(""),[W,q]=(0,v.useState)(""),[T,L]=(0,v.useState)(""),[O,R]=(0,v.useState)([]),[D,I]=(0,v.useState)(null),Q=async()=>{let{result:e,error:t}=await (0,i.ZP)("users",b);if(t)console.error("Error fetching document:",t);else if(e){let t=e.data();y(t.name),z(t.email),w(t.tel),E(t.address),_(t.profileUrl),k(t.province),q(t.amphure),L(t.tambon),t.salary&&J(t.salary)}};(0,v.useEffect)(()=>{Q(),fetch("https://raw.githubusercontent.com/kongvut/thai-province-data/master/api_province_with_amphure_tambon.json",{method:"GET",redirect:"follow"}).then(e=>e.json()).then(e=>{e.sort((e,t)=>e.name_th.localeCompare(t.name_th)),e.forEach(e=>{e.amphure&&(e.amphure.sort((e,t)=>e.name_th.localeCompare(t.name_th)),e.amphure.forEach(e=>{e.tambon&&e.tambon.sort((e,t)=>e.name_th.localeCompare(t.name_th))}))}),R(e)}).catch(e=>console.log("error",e))},[]);let A=async e=>{e.preventDefault();let t=await (0,n.Z)("users",b,{email:U,name:Z,address:C,province:N,amphure:W,tambon:T,tel:S,profileUrl:j,salary:P});t?I((0,r.jsx)(s.Z,{severity:"success",children:"แก้ไข้ข้อมูลสำเร็จ"})):I((0,r.jsx)(s.Z,{severity:"error",children:"ผิดพลาด! ไม่สามารถแก้ไข้ข้อมูลได้"}))};return(0,r.jsx)(l.Z,{children:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(u.Z,{sx:{fontSize:"2vw",fontWeight:"600",mt:5},children:"แก้ไขข้อมูลพนักงาน"}),D,(0,r.jsx)("form",{onSubmit:A,className:"form",children:(0,r.jsx)(o.Z,{sx:{m:2},children:(0,r.jsxs)(c.ZP,{container:!0,spacing:1,sx:{backgroundColor:"#fff",p:1,borderRadius:"10px",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)"},children:[(0,r.jsx)(c.ZP,{item:!0,xs:12,sm:12,children:(0,r.jsxs)(o.Z,{sx:{textAlign:"center"},children:[(0,r.jsx)(o.Z,{children:j&&(0,r.jsx)(p(),{src:j,alt:"Uploaded Image",priority:!0,height:"150",width:"150",style:{borderRadius:"100px",border:"1px solid rgba(0, 0, 0, 0.50)"}})}),(0,r.jsxs)("label",{htmlFor:"upload-image",children:[(0,r.jsx)(d.Z,{variant:"contained",component:"span",children:"แก้ไขรูปโปรไฟล์"}),(0,r.jsx)("input",{id:"upload-image",hidden:!0,accept:"image/*",type:"file",onChange:e=>{let t=e.target.files[0];if(!t){console.error("No file selected."),_("/../public/default-profile.jpg");return}let a=new FileReader;a.onloadend=()=>{_(a.result)},a.readAsDataURL(t)}})]})]})}),(0,r.jsxs)(c.ZP,{item:!0,xs:12,sm:6,children:[(0,r.jsx)(h.Z,{variant:"outlined",value:String(Z),label:"ชื่อ",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>y(e.target.value)}),(0,r.jsx)(h.Z,{variant:"outlined",value:String(U),label:"อีเมล",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>z(e.target.value)}),(0,r.jsx)(h.Z,{variant:"outlined",label:"เบอร์ติดต่อ",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>w(e.target.value),value:String(S)}),(0,r.jsx)(h.Z,{variant:"outlined",label:"ค่าจ้าง",onKeyDown:e=>{("-"===e.key||"e"===e.key)&&e.preventDefault()},fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>J(e.target.value),value:String(P)})]}),(0,r.jsxs)(c.ZP,{item:!0,xs:12,sm:6,children:[(0,r.jsx)(h.Z,{variant:"outlined",label:"บ้านเลขที่",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>E(e.target.value),value:String(C)}),(0,r.jsxs)(m.Z,{fullWidth:!0,children:[(0,r.jsxs)(h.Z,{size:"small",label:"จังหวัด",select:!0,sx:{mt:1,mb:1},value:String(N),onChange:e=>{k(e.target.value),q(""),L("")},children:[(0,r.jsx)(f.Z,{value:"",children:"กรุณาเลือกจังหวัด"}),O.map(e=>(0,r.jsx)(f.Z,{value:String(e.name_th),children:e.name_th},e.id))]}),(0,r.jsxs)(h.Z,{size:"small",label:"อำเภอ",select:!0,sx:{mt:1,mb:1},value:String(W),onChange:e=>{q(e.target.value),L("")},children:[(0,r.jsx)(f.Z,{value:"",children:"กรุณาเลือกอำเภอ"}),N&&(null===(e=O.find(e=>e.name_th===N))||void 0===e?void 0:e.amphure.map(e=>(0,r.jsx)(f.Z,{value:String(e.name_th),children:e.name_th},e.id)))]}),(0,r.jsxs)(h.Z,{size:"small",label:"ตำบล",select:!0,value:String(T),onChange:e=>{L(e.target.value)},sx:{mt:1,mb:1},children:[(0,r.jsx)(f.Z,{value:"",children:"กรุณาเลือกตำบล"}),W&&(null===(a=O.find(e=>e.name_th===N))||void 0===a?void 0:null===(t=a.amphure.find(e=>e.name_th===W))||void 0===t?void 0:t.tambon.map(e=>(0,r.jsx)(f.Z,{value:String(e.name_th),children:e.name_th},e.id)))]})]})]}),(0,r.jsx)(d.Z,{variant:"contained",sx:{p:2,mb:4},fullWidth:!0,type:"submit",children:"บันทึก"})]})})})]})})}}},function(e){e.O(0,[2607,9078,7393,6298,6886,505,3717,3914,945,8895,8010,9774,2888,179],function(){return e(e.s=24148)}),_N_E=e.O()}]);