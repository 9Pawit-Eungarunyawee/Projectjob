(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1941],{18625:function(t,e,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/order",function(){return r(72797)}])},49925:function(t,e,r){"use strict";r.d(e,{EC:function(){return a},Eq:function(){return d},KL:function(){return s},PR:function(){return u},ZP:function(){return c},_N:function(){return o},wv:function(){return h}});var n=r(11802),i=r(36100);let l=(0,i.ad)(n.Z);async function c(t,e){let r=(0,i.JU)(l,t,e);try{let t=await (0,i.QT)(r);return{result:t,error:null}}catch(t){return{result:null,error:t}}}let o=async t=>{let e=await (0,i.PL)((0,i.hJ)(l,t));return{result:e,error:null}},a=async(t,e)=>{let r=(0,i.JU)(l,"catalog",e),n=(0,i.IO)((0,i.hJ)(l,t),(0,i.ar)("catalog_id","==",r)),c=await (0,i.PL)(n);return{result:c,error:null}},s=async t=>{let e=[];for(let r of t){let t=await (0,i.QT)((0,i.JU)(l,"products",r));if(t.exists()){let n=t.data(),i={id:r,...n};e.push(i)}}return e},d=async t=>{let e=[];for(let r of t){let t=await (0,i.QT)((0,i.JU)(l,"colors",r));if(t.exists()){let n=t.data(),i={id:r,...n};e.push(i)}}return e},u=async(t,e)=>{let r=(0,i.IO)((0,i.hJ)(l,t),(0,i.ar)("uid","==",String(e))),n=await (0,i.PL)(r);return n.forEach(t=>{console.log(t.id," => ",t.data())}),{result:n,error:null}},h=async(t,e)=>{let r=(0,i.JU)(l,"catalog",e),n=await (0,i.QT)(r);if(!n.exists())return console.error("Catalog document not found"),{result:null,error:"Catalog document not found"};let c=(0,i.IO)((0,i.hJ)(l,t),(0,i.ar)("catalog_id","==",r));try{let t=await (0,i.PL)(c);return t.forEach(t=>{console.log(t.id," => ",t.data())}),{result:t,error:null}}catch(t){return console.error("Error getting products: ",t),{result:null,error:t}}}},72797:function(t,e,r){"use strict";r.r(e),r.d(e,{default:function(){return E}});var n=r(85893),i=r(67294),l=r(87357),c=r(98010),o=r(90948),a=r(98102),s=r(89755),d=r(53816),u=r(68239),h=r(22430),x=r(15861),f=r(72882),j=r(90629),g=r(7906),m=r(53184),p=r(295),Z=r(83321),w=r(25675),_=r.n(w),y=r(49925);function E(){let t=(0,o.ZP)(a.Z)(t=>{let{theme:e}=t;return{["&.".concat(s.Z.head)]:{backgroundColor:"#018294",color:e.palette.common.white},["&.".concat(s.Z.body)]:{fontSize:14,maxWidth:"200px"}}}),e=(0,o.ZP)(d.Z)(t=>{let{theme:e}=t;return{"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}),r=(0,u.Z)({palette:{primary:{main:"#018294"},success:{main:"#A9C470"},error:{main:"#FE616A"}}}),[w,E]=(0,i.useState)([]);(0,i.useEffect)(()=>{N()},[]);let N=async()=>{let{result:t,error:e}=await (0,y._N)("orders");if(e)console.error("Error fetching document:",e);else if(t){let e=t.docs.map(t=>({id:t.id,...t.data()}));E(e)}},P=w.map((t,e)=>{var r,n;let i=t.date?t.date.toDate().toLocaleString("th-TH",{dateStyle:"medium"}):"",l=t.date?t.date.toDate().toLocaleString("th-TH",{timeStyle:"short"}):"";return r=t.user_id,n=t.product_id,{No:e+1,date:i,time:l,name:r,product_id:n,price:t.price,img:t.img,status:t.status}});return(0,n.jsx)(c.Z,{children:(0,n.jsx)(h.Z,{theme:r,children:(0,n.jsx)(l.Z,{children:(0,n.jsxs)(l.Z,{sx:{height:"100%",width:"100%",mt:5},children:[(0,n.jsx)(x.Z,{sx:{fontSize:"2rem",fontWeight:"600"},children:"จัดการคำสั่งซื้อ"}),(0,n.jsx)(f.Z,{component:j.Z,sx:{borderRadius:"25px"},children:(0,n.jsxs)(g.Z,{sx:{minWidth:700},children:[(0,n.jsx)(m.Z,{children:(0,n.jsxs)(d.Z,{children:[(0,n.jsx)(t,{align:"center",children:"No."}),(0,n.jsx)(t,{align:"center",children:"วันที่"}),(0,n.jsx)(t,{align:"center",children:"เวลา"}),(0,n.jsx)(t,{children:"ชื่อลูกค้า"}),(0,n.jsx)(t,{children:"รายการคำสั่งซื้อ"}),(0,n.jsx)(t,{children:"ยอดรวม"}),(0,n.jsx)(t,{children:"หลักฐานการชำระเงิน"}),(0,n.jsx)(t,{children:"สถานะคำสั่งซื้อ"}),(0,n.jsx)(t,{align:"center"})]})}),(0,n.jsx)(p.Z,{children:P.map(r=>(0,n.jsxs)(e,{children:[(0,n.jsx)(t,{component:"th",scope:"row",align:"center",children:r.No}),(0,n.jsx)(t,{children:r.date}),(0,n.jsx)(t,{children:r.time}),(0,n.jsx)(t,{children:r.name}),(0,n.jsx)(t,{children:r.product_id}),(0,n.jsx)(t,{children:r.price}),(0,n.jsx)(t,{align:"center",children:(0,n.jsx)(_(),{src:r.img,alt:"Product Image",priority:!0,height:"75",width:"75"})}),(0,n.jsx)(t,{children:r.status}),(0,n.jsx)(t,{align:"center",children:(0,n.jsx)(Z.Z,{color:"primary",onClick:()=>handleRestoreData(r.id),children:"กู้คืน"})})]},r.No))})]})})]})})})})}}},function(t){t.O(0,[2607,9078,7393,6886,505,3717,3914,7199,8721,8010,9774,2888,179],function(){return t(t.s=18625)}),_N_E=t.O()}]);