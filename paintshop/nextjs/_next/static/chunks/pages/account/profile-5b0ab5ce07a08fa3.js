(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2771],{31425:function(e,n,t){"use strict";t.d(n,{Z:function(){return g}});var s=t(63366),i=t(87462),r=t(67294),l=t(86010),o=t(94780),a=t(90948),c=t(71657),d=t(1588),u=t(34867);function x(e){return(0,u.Z)("MuiDialogActions",e)}(0,d.Z)("MuiDialogActions",["root","spacing"]);var h=t(85893);let m=["className","disableSpacing"],f=e=>{let{classes:n,disableSpacing:t}=e;return(0,o.Z)({root:["root",!t&&"spacing"]},x,n)},Z=(0,a.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:t}=e;return[n.root,!t.disableSpacing&&n.spacing]}})(({ownerState:e})=>(0,i.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),j=r.forwardRef(function(e,n){let t=(0,c.Z)({props:e,name:"MuiDialogActions"}),{className:r,disableSpacing:o=!1}=t,a=(0,s.Z)(t,m),d=(0,i.Z)({},t,{disableSpacing:o}),u=f(d);return(0,h.jsx)(Z,(0,i.Z)({className:(0,l.Z)(u.root,r),ownerState:d,ref:n},a))});var g=j},31178:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/profile",function(){return t(97331)}])},53233:function(e,n,t){"use strict";t.d(n,{Z:function(){return l}});var s=t(11802),i=t(36100);let r=(0,i.ad)(s.Z);async function l(e,n,t){let s=null,l=null;if(t.catalog_id){let e=(0,i.JU)(r,"catalog",t.catalog_id);t.catalog_id=e}try{s=await (0,i.pl)((0,i.JU)(r,e,n),t,{merge:!0}),console.log("แก้ไขสำเร็จ",s)}catch(e){console.error("เกิดข้อผิดพลาดในการแก้ไขข้อมูล:",l=e)}return{result:s,error:l}}},15517:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return j}});var s=t(85893),i=t(67294),r=t(46901),l=t(50657),o=t(37645),a=t(58703),c=t(6514),d=t(98271),u=t(31425),x=t(83321),h=t(50838),m=t(49925),f=t(11163),Z=t(53233);function j(e){let{handleClickOpen:n,onFormSubmitSuccess:t}=e,[j,g]=i.useState(!1),[p,b]=i.useState(!1),[v,E]=i.useState(""),[w,P]=i.useState(""),[y,S]=i.useState(""),[C,A]=i.useState(null),_=(0,h.Eu)();(0,f.useRouter)();let k=async()=>{g(!0),n(),await R()},D=()=>{g(!1)},N=async e=>{e.preventDefault(),console.log("Handling form submission"),D();let n={email:y,name:v,tel:w};console.log("Submitting form with data:",n);let{result:i,error:l}=await (0,Z.Z)("users",_.user.uid,n);console.log("Result:",i),console.log("Error:",l),l?(A((0,s.jsx)(r.Z,{severity:"error",children:"ผิดพลาด! ไม่สามารถแก้ไข้ข้อมูลได้"})),b(!0)):(A((0,s.jsx)(r.Z,{severity:"success",children:"แก้ไข้ข้อมูลสำเร็จ"})),t(),b(!0))},R=async()=>{let e=_.user.uid,{result:n,error:t}=await (0,m.PR)("users",e);if(t)console.error("Error fetching document:",t);else if(n.docs.length>0){let e=n.docs[0].data();E(e.name),S(e.email),P(e.tel)}};return i.useEffect(()=>{R()},[]),(0,s.jsxs)(i.Fragment,{children:[(0,s.jsxs)(l.Z,{open:j,onClose:D,children:[(0,s.jsx)(o.Z,{sx:{fontWeight:"bold"},children:"แก้ไขข้อมูลส่วนตัว"}),(0,s.jsx)(a.Z,{open:j,autoHideDuration:6e3,onClose:(e,n)=>{"clickaway"!==n&&b(!1)},children:C}),(0,s.jsxs)("form",{onSubmit:N,className:"form",children:[(0,s.jsxs)(c.Z,{children:[(0,s.jsx)(d.Z,{variant:"outlined",value:String(v),label:"ชื่อ",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>E(e.target.value)}),(0,s.jsx)(d.Z,{variant:"outlined",value:String(y),label:"อีเมล",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>S(e.target.value)}),(0,s.jsx)(d.Z,{variant:"outlined",label:"เบอร์ติดต่อ",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>P(e.target.value),value:String(w)})]}),(0,s.jsxs)(u.Z,{children:[(0,s.jsx)(x.Z,{variant:"outlined",onClick:D,sx:{borderColor:"#018294",color:"#018294",mb:4,"&:hover":{backgroundColor:"#018294",color:"#fff"}},children:"ยกเลิก"}),(0,s.jsx)(x.Z,{variant:"contained",sx:{backgroundColor:"#018294",color:"#fff",mb:4,"&:hover":{backgroundColor:"#01576e"}},type:"submit",children:"บันทึก"})]})]})]}),(0,s.jsx)(x.Z,{sx:{color:"#018294"},onClick:k,children:"แก้ไข"})]})}},97331:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return p}});var s=t(85893),i=t(67294),r=t(17576),l=t(49505),o=t(87357),a=t(65582),c=t(12963),d=t(15861),u=t(86886),x=t(41664),h=t.n(x),m=t(15517),f=t(49925),Z=t(11163),j=t(50838);function g(e){e.preventDefault(),console.info("You clicked a breadcrumb.")}function p(){(0,Z.useRouter)();let e=(0,j.Eu)(),[n,t]=i.useState(null),[x,p]=i.useState(!1);i.useEffect(()=>{b()},[]);let b=async()=>{let n=e.user.uid,{result:s,error:i}=await (0,f.PR)("users",n);if(i)console.error("Error fetching collection:",i);else{let e=s.docs.map(e=>({id:e.id,name:e.data().name,email:e.data().email,tel:e.data().tel}));t(e)}};return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(r.Z,{children:(0,s.jsxs)(o.Z,{sx:{width:"100%"},children:[(0,s.jsx)(a.Z,{maxWidth:"false",sx:{display:"flex",justifyContent:"center",bgcolor:"#FAF8F1"},children:(0,s.jsx)(o.Z,{sx:{width:"70vw",pt:2,pb:2},children:(0,s.jsx)("div",{role:"presentation",onClick:g,children:(0,s.jsxs)(c.Z,{"aria-label":"Beger",children:[(0,s.jsx)(h(),{style:{textDecoration:"none",color:"inherit"},sx:{color:"inherit","&:hover":{textDecoration:"underline"}},href:"/homepage",children:"หน้าแรก"}),(0,s.jsx)(d.Z,{color:"text.primary",children:"บัญชีของฉัน"})]})})})}),(0,s.jsx)(a.Z,{maxWidth:!1,sx:{display:"flex",justifyContent:"center",bgcolor:"white"},children:(0,s.jsx)(o.Z,{sx:{p:3,width:"70vw"},children:(0,s.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,s.jsx)(u.ZP,{item:!0,sm:3,xs:12,children:(0,s.jsx)(l.Z,{})}),(0,s.jsxs)(u.ZP,{item:!0,sm:9,xs:12,sx:{p:2,pl:2},children:[(0,s.jsxs)(u.ZP,{item:!0,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,s.jsx)(d.Z,{sx:{fontWeight:"bold",fontSize:"18px",pb:2,pt:2},children:"ข้อมูลส่วนตัว"}),(0,s.jsx)(m.default,{handleClickOpen:()=>{p(!0)},onFormSubmitSuccess:()=>{b()}})]}),n&&n.map((e,n)=>(0,s.jsxs)(u.ZP,{children:[(0,s.jsxs)(u.ZP,{container:!0,spacing:2,sx:{mb:2,borderBottom:"1px solid #EAEAEA",pb:2},children:[(0,s.jsx)(u.ZP,{item:!0,sm:4,xs:9,children:(0,s.jsx)(d.Z,{children:"ชื่อโปรไฟล์"})}),(0,s.jsx)(u.ZP,{item:!0,sm:5,xs:9,children:(0,s.jsx)(d.Z,{children:e.name})})]}),(0,s.jsxs)(u.ZP,{container:!0,spacing:2,sx:{mb:2,borderBottom:"1px solid #EAEAEA",pb:2},children:[(0,s.jsx)(u.ZP,{item:!0,sm:4,xs:9,children:(0,s.jsx)(d.Z,{children:"เบอร์โทรศัพท์"})}),(0,s.jsx)(u.ZP,{item:!0,sm:5,xs:9,children:(0,s.jsx)(d.Z,{children:e.tel})})]}),(0,s.jsxs)(u.ZP,{container:!0,spacing:2,sx:{mb:2,borderBottom:"1px solid #EAEAEA",pb:2},children:[(0,s.jsx)(u.ZP,{item:!0,sm:4,xs:9,children:(0,s.jsx)(d.Z,{children:"อีเมล"})}),(0,s.jsx)(u.ZP,{item:!0,sm:5,xs:9,children:(0,s.jsx)(d.Z,{children:e.email})})]}),(0,s.jsxs)(u.ZP,{container:!0,spacing:2,sx:{mb:2,borderBottom:"1px solid #EAEAEA",pb:2},children:[(0,s.jsx)(u.ZP,{item:!0,sm:4,xs:9,children:(0,s.jsx)(d.Z,{children:"รหัสผ่าน"})}),(0,s.jsx)(u.ZP,{item:!0,sm:5,xs:9,children:(0,s.jsx)(d.Z,{children:"-"})})]})]},n))]})]})})})]})})})}},11163:function(e,n,t){e.exports=t(96885)}},function(e){e.O(0,[2607,7609,5675,6298,6185,1283,3717,3914,8360,8271,4163,4792,7451,3466,5593,9774,2888,179],function(){return e(e.s=31178)}),_N_E=e.O()}]);