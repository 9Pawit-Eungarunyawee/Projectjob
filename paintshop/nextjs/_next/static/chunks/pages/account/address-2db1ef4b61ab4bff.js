(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6014],{31425:function(e,n,i){"use strict";i.d(n,{Z:function(){return j}});var t=i(63366),s=i(87462),o=i(67294),r=i(86010),l=i(94780),d=i(90948),a=i(71657),c=i(1588),u=i(34867);function h(e){return(0,u.Z)("MuiDialogActions",e)}(0,c.Z)("MuiDialogActions",["root","spacing"]);var x=i(85893);let m=["className","disableSpacing"],f=e=>{let{classes:n,disableSpacing:i}=e;return(0,l.Z)({root:["root",!i&&"spacing"]},h,n)},p=(0,d.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,n)=>{let{ownerState:i}=e;return[n.root,!i.disableSpacing&&n.spacing]}})(({ownerState:e})=>(0,s.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),Z=o.forwardRef(function(e,n){let i=(0,a.Z)({props:e,name:"MuiDialogActions"}),{className:o,disableSpacing:l=!1}=i,d=(0,t.Z)(i,m),c=(0,s.Z)({},i,{disableSpacing:l}),u=f(c);return(0,x.jsx)(p,(0,s.Z)({className:(0,r.Z)(u.root,o),ownerState:c,ref:n},d))});var j=Z},19693:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/address",function(){return i(87761)}])},5371:function(e,n,i){"use strict";i.d(n,{Z:function(){return r}});var t=i(11802),s=i(36100);let o=(0,s.ad)(t.Z);async function r(e,n,i){let t=null;try{let t={address:i.address,province:i.provinceName,amphure:i.amphureName,tambon:i.tambonName,zipcode:i.zipCode},r=(0,s.JU)(o,e,n);await (0,s.r7)(r,{addresses:(0,s.vr)(t)}),console.log("เพิ่มข้อมูลสำเร็จ")}catch(e){console.error("เกิดข้อผิดพลาดในการเพิ่มข้อมูล:",t=e)}return{result:null,error:t}}},46492:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return f}});var t=i(85893),s=i(67294),o=i(83321),r=i(50657),l=i(37645),d=i(6514),a=i(86886),c=i(98271),u=i(43665),h=i(31425),x=i(5371),m=i(50838);function f(){let[e,n]=s.useState(!1),[i,f]=s.useState(null),[p,Z]=s.useState([]),[j,v]=s.useState([]),[b,g]=s.useState([]),[_,w]=s.useState(void 0),[C,S]=s.useState(void 0),[P,y]=s.useState(void 0),[k,E]=s.useState(void 0),[N,W]=s.useState(void 0),z=(0,m.Eu)(),[D,O]=s.useState({province_id:void 0,amphure_id:void 0,tambon_id:void 0});s.useEffect(()=>{var e,n,i,t,s,o;if(console.log(D),p){let i=null===(e=p.find(e=>e.id===D.province_id))||void 0===e?void 0:e.amphure;v(i);let t=null===(n=p.find(e=>e.id===D.province_id))||void 0===n?void 0:n.name_th;S(t)}if(j){let e=null===(i=j.find(e=>e.id===D.amphure_id))||void 0===i?void 0:i.tambon;g(e);let n=null===(t=j.find(e=>e.id===D.amphure_id))||void 0===t?void 0:t.name_th;y(n)}if(b){let e=null===(s=b.find(e=>e.id===D.tambon_id))||void 0===s?void 0:s.name_th,n=null===(o=b.find(e=>e.id===D.tambon_id))||void 0===o?void 0:o.zip_code;E(e),w(n)}},[D,p,j,b]),console.log("ทดสอบ",i,C,P,k,_),s.useEffect(()=>{fetch("https://raw.githubusercontent.com/kongvut/thai-province-data/master/api_province_with_amphure_tambon.json",{method:"GET",redirect:"follow"}).then(e=>e.json()).then(e=>{Z(e)}).catch(e=>console.log("error",e))},[]);let F=async e=>{e.preventDefault(),console.log("Handling form submission"),A();let n={address:i,provinceName:C,amphureName:P,tambonName:k,zipCode:_};console.log("Submitting form with data:",n);let{result:t,error:s}=await (0,x.Z)("users",z.user.uid,n)},A=()=>{n(!1)};return(0,t.jsxs)(s.Fragment,{children:[(0,t.jsx)(o.Z,{onClick:()=>{n(!0)},sx:{color:"#018294"},children:"เพิ่มที่อยู่"}),(0,t.jsxs)(r.Z,{open:e,onClose:A,children:[(0,t.jsx)(l.Z,{sx:{fontWeight:"bold"},children:"ที่อยู่จัดส่ง"}),(0,t.jsxs)("form",{onSubmit:F,className:"form",children:[(0,t.jsx)(d.Z,{children:(0,t.jsxs)(a.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(a.ZP,{xs:12,item:!0,children:(0,t.jsx)(c.Z,{variant:"outlined",label:"บ้านเลขที่",fullWidth:!0,multiline:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>f(e.target.value)})}),(0,t.jsx)(a.ZP,{xs:12,sm:6,item:!0,children:(0,t.jsx)(u.Z,{disablePortal:!0,options:p,getOptionLabel:e=>e.name_th,onChange:(e,n)=>{O(e=>({...e,province_id:n?n.id:void 0,amphure_id:void 0,tambon_id:void 0}))},fullWidth:!0,required:!0,size:"small",renderInput:e=>(0,t.jsx)(c.Z,{...e,label:"จังหวัด"})})}),(0,t.jsx)(a.ZP,{xs:12,sm:6,item:!0,children:(0,t.jsx)(u.Z,{disablePortal:!0,options:j||[],getOptionLabel:e=>e.name_th,onChange:(e,n)=>{O(e=>({...e,amphure_id:n?n.id:void 0,tambon_id:void 0}))},fullWidth:!0,size:"small",renderInput:e=>(0,t.jsx)(c.Z,{...e,label:"อำเภอ/เขต"})})}),(0,t.jsx)(a.ZP,{xs:12,sm:6,item:!0,children:(0,t.jsx)(u.Z,{disablePortal:!0,options:b||[],getOptionLabel:e=>e.name_th,onChange:(e,n)=>{O(e=>({...e,tambon_id:n?n.id:void 0}))},fullWidth:!0,size:"small",renderInput:e=>(0,t.jsx)(c.Z,{...e,label:"ตำบล"})})}),(0,t.jsx)(a.ZP,{xs:12,sm:6,item:!0,children:(0,t.jsx)(c.Z,{variant:"outlined",label:"รหัสไปรษณีย์",value:_||"",fullWidth:!0,required:!0,size:"small"})})]})}),(0,t.jsxs)(h.Z,{children:[(0,t.jsx)(o.Z,{variant:"outlined",onClick:A,sx:{borderColor:"#018294",color:"#018294",mb:4,"&:hover":{backgroundColor:"#018294",color:"#fff"}},children:"ยกเลิก"}),(0,t.jsx)(o.Z,{variant:"contained",sx:{backgroundColor:"#018294",color:"#fff",mb:4,"&:hover":{backgroundColor:"#01576e"}},type:"submit",children:"บันทึก"})]})]})]})]})}},87761:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return y}});var t=i(85893),s=i(67294),o=i(17576),r=i(49505),l=i(87357),d=i(65582),a=i(12963),c=i(15861),u=i(86886),h=i(72882),x=i(90629),m=i(7906),f=i(53184),p=i(53816),Z=i(98102),j=i(295),v=i(83321),b=i(41664),g=i.n(b),_=i(11163),w=i(50838),C=i(49925),S=i(46492);function P(e){e.preventDefault(),console.info("You clicked a breadcrumb.")}function y(){(0,_.useRouter)();let e=(0,w.Eu)(),[n,i]=s.useState(null);s.useEffect(()=>{b()},[]);let b=async()=>{let n=e.user.uid,{result:t,error:s}=await (0,C.PR)("users",n);if(s)console.error("Error fetching collection:",s);else{let e=t.docs.map(e=>({id:e.id,name:e.data().name,tel:e.data().tel,addresses:e.data().addresses||[]}));console.log("ทดสอบรหัสผู้ใช้",n),console.log("ทดสอบuser",e),i(e)}};return(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(o.Z,{children:(0,t.jsxs)(l.Z,{sx:{width:"100%"},children:[(0,t.jsx)(d.Z,{maxWidth:"false",sx:{display:"flex",justifyContent:"center",bgcolor:"#FAF8F1"},children:(0,t.jsx)(l.Z,{sx:{width:"70vw",pt:2,pb:2},children:(0,t.jsx)("div",{role:"presentation",onClick:P,children:(0,t.jsxs)(a.Z,{"aria-label":"Beger",children:[(0,t.jsx)(g(),{style:{textDecoration:"none",color:"inherit"},sx:{color:"inherit","&:hover":{textDecoration:"underline"}},href:"/homepage",children:"หน้าแรก"}),(0,t.jsx)(c.Z,{color:"text.primary",children:"บัญชีของฉัน"})]})})})}),(0,t.jsx)(d.Z,{maxWidth:!1,sx:{display:"flex",justifyContent:"center",bgcolor:"white"},children:(0,t.jsx)(l.Z,{sx:{p:3,width:"70vw"},children:(0,t.jsxs)(u.ZP,{container:!0,spacing:2,children:[(0,t.jsx)(u.ZP,{item:!0,sm:3,xs:12,children:(0,t.jsx)(r.Z,{})}),(0,t.jsxs)(u.ZP,{item:!0,sm:9,xs:12,children:[" ",(0,t.jsxs)(u.ZP,{item:!0,sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,t.jsx)(c.Z,{sx:{fontWeight:"bold",fontSize:"18px",pb:2,pt:2},children:"ที่อยู่จัดส่งสินค้า"}),(0,t.jsx)(S.default,{handleClickOpen:()=>{setOpen(!0)}})]}),(0,t.jsx)(h.Z,{component:x.Z,children:(0,t.jsxs)(m.Z,{"aria-label":"simple table",children:[(0,t.jsx)(f.Z,{children:(0,t.jsxs)(p.Z,{children:[(0,t.jsx)(Z.Z,{children:"ชื่อ"}),(0,t.jsx)(Z.Z,{children:"เบอร์โทรศัพท์"}),(0,t.jsx)(Z.Z,{children:"ที่อยู่"}),(0,t.jsx)(Z.Z,{}),(0,t.jsx)(Z.Z,{})]})}),(0,t.jsx)(j.Z,{children:n&&n.map((e,n)=>(0,t.jsx)(s.Fragment,{children:e.addresses&&e.addresses.map((n,i)=>(0,t.jsxs)(p.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,t.jsx)(Z.Z,{component:"th",scope:"row",sx:{fontWeight:"bold"},children:e.name}),(0,t.jsx)(Z.Z,{children:e.tel}),(0,t.jsxs)(Z.Z,{children:[n.address," อำเภอ ",n.amphure," ตำบล ",n.tambon," จังหวัด ",n.province]}),(0,t.jsxs)(Z.Z,{children:[(0,t.jsx)(v.Z,{sx:{color:"#018294"},children:"แก้ไข"}),(0,t.jsx)(v.Z,{sx:{color:"#018294"},children:"ลบ"})]})]},i))},n))})]})})]})]})})})]})})})}},11163:function(e,n,i){e.exports=i(96885)}},function(e){e.O(0,[2607,7609,5675,6298,6185,1283,3717,3914,8360,8271,4163,9254,7451,6078,3665,3466,5593,9774,2888,179],function(){return e(e.s=19693)}),_N_E=e.O()}]);