(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9190],{95291:function(e,t,r){"use strict";var o=r(64836);t.Z=void 0;var n=o(r(64938)),l=r(85893),s=(0,n.default)((0,l.jsx)("path",{d:"M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-8.9-5h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4l-3.87 7H8.53L4.27 2H1v2h2l3.6 7.59-1.35 2.44C4.52 15.37 5.48 17 7 17h12v-2H7l1.1-2z"}),"AddShoppingCartOutlined");t.Z=s},96471:function(e,t,r){"use strict";var o=r(64836);t.Z=void 0;var n=o(r(64938)),l=r(85893),s=(0,n.default)((0,l.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackOutlined");t.Z=s},46907:function(e,t,r){"use strict";var o=r(64836);t.Z=void 0;var n=o(r(64938)),l=r(85893),s=(0,n.default)((0,l.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline");t.Z=s},12963:function(e,t,r){"use strict";r.d(t,{Z:function(){return R}});var o=r(87462),n=r(63366),l=r(67294);r(59864);var s=r(86010),i=r(94780),a=r(24349),c=r(90948),d=r(71657),h=r(15861),u=r(41796),x=r(88169),p=r(85893),Z=(0,x.Z)((0,p.jsx)("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreHoriz"),m=r(82607);let f=["slots","slotProps"],j=(0,c.ZP)(m.Z)(({theme:e})=>(0,o.Z)({display:"flex",marginLeft:`calc(${e.spacing(1)} * 0.5)`,marginRight:`calc(${e.spacing(1)} * 0.5)`},"light"===e.palette.mode?{backgroundColor:e.palette.grey[100],color:e.palette.grey[700]}:{backgroundColor:e.palette.grey[700],color:e.palette.grey[100]},{borderRadius:2,"&:hover, &:focus":(0,o.Z)({},"light"===e.palette.mode?{backgroundColor:e.palette.grey[200]}:{backgroundColor:e.palette.grey[600]}),"&:active":(0,o.Z)({boxShadow:e.shadows[0]},"light"===e.palette.mode?{backgroundColor:(0,u._4)(e.palette.grey[200],.12)}:{backgroundColor:(0,u._4)(e.palette.grey[600],.12)})})),g=(0,c.ZP)(Z)({width:24,height:16});var v=function(e){let{slots:t={},slotProps:r={}}=e,l=(0,n.Z)(e,f);return(0,p.jsx)("li",{children:(0,p.jsx)(j,(0,o.Z)({focusRipple:!0},l,{ownerState:e,children:(0,p.jsx)(g,(0,o.Z)({as:t.CollapsedIcon,ownerState:e},r.collapsedIcon))}))})},b=r(1588),w=r(34867);function y(e){return(0,w.Z)("MuiBreadcrumbs",e)}let C=(0,b.Z)("MuiBreadcrumbs",["root","ol","li","separator"]),S=["children","className","component","slots","slotProps","expandText","itemsAfterCollapse","itemsBeforeCollapse","maxItems","separator"],k=e=>{let{classes:t}=e;return(0,i.Z)({root:["root"],li:["li"],ol:["ol"],separator:["separator"]},y,t)},E=(0,c.ZP)(h.Z,{name:"MuiBreadcrumbs",slot:"Root",overridesResolver:(e,t)=>[{[`& .${C.li}`]:t.li},t.root]})({}),P=(0,c.ZP)("ol",{name:"MuiBreadcrumbs",slot:"Ol",overridesResolver:(e,t)=>t.ol})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"}),_=(0,c.ZP)("li",{name:"MuiBreadcrumbs",slot:"Separator",overridesResolver:(e,t)=>t.separator})({display:"flex",userSelect:"none",marginLeft:8,marginRight:8}),M=l.forwardRef(function(e,t){var r,i;let c=(0,d.Z)({props:e,name:"MuiBreadcrumbs"}),{children:h,className:u,component:x="nav",slots:Z={},slotProps:m={},expandText:f="Show path",itemsAfterCollapse:j=1,itemsBeforeCollapse:g=1,maxItems:b=8,separator:w="/"}=c,y=(0,n.Z)(c,S),[C,M]=l.useState(!1),R=(0,o.Z)({},c,{component:x,expanded:C,expandText:f,itemsAfterCollapse:j,itemsBeforeCollapse:g,maxItems:b,separator:w}),z=k(R),B=(0,a.Z)({elementType:Z.CollapsedIcon,externalSlotProps:m.collapsedIcon,ownerState:R}),F=l.useRef(null),N=l.Children.toArray(h).filter(e=>l.isValidElement(e)).map((e,t)=>(0,p.jsx)("li",{className:z.li,children:e},`child-${t}`));return(0,p.jsx)(E,(0,o.Z)({ref:t,component:x,color:"text.secondary",className:(0,s.Z)(z.root,u),ownerState:R},y,{children:(0,p.jsx)(P,{className:z.ol,ref:F,ownerState:R,children:(r=C||b&&N.length<=b?N:g+j>=N.length?N:[...N.slice(0,g),(0,p.jsx)(v,{"aria-label":f,slots:{CollapsedIcon:Z.CollapsedIcon},slotProps:{collapsedIcon:B},onClick:()=>{M(!0);let e=F.current.querySelector("a[href],button,[tabindex]");e&&e.focus()}},"ellipsis"),...N.slice(N.length-j,N.length)],i=z.separator,r.reduce((e,t,o)=>(o<r.length-1?e=e.concat(t,(0,p.jsx)(_,{"aria-hidden":!0,className:i,ownerState:R,children:w},`separator-${o}`)):e.push(t),e),[]))})}))});var R=M},44267:function(e,t,r){"use strict";r.d(t,{Z:function(){return j}});var o=r(87462),n=r(63366),l=r(67294),s=r(86010),i=r(94780),a=r(90948),c=r(71657),d=r(1588),h=r(34867);function u(e){return(0,h.Z)("MuiCardContent",e)}(0,d.Z)("MuiCardContent",["root"]);var x=r(85893);let p=["className","component"],Z=e=>{let{classes:t}=e;return(0,i.Z)({root:["root"]},u,t)},m=(0,a.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),f=l.forwardRef(function(e,t){let r=(0,c.Z)({props:e,name:"MuiCardContent"}),{className:l,component:i="div"}=r,a=(0,n.Z)(r,p),d=(0,o.Z)({},r,{component:i}),h=Z(d);return(0,x.jsx)(m,(0,o.Z)({as:i,className:(0,s.Z)(h.root,l),ownerState:d,ref:t},a))});var j=f},66242:function(e,t,r){"use strict";r.d(t,{Z:function(){return g}});var o=r(87462),n=r(63366),l=r(67294),s=r(86010),i=r(94780),a=r(90948),c=r(71657),d=r(90629),h=r(1588),u=r(34867);function x(e){return(0,u.Z)("MuiCard",e)}(0,h.Z)("MuiCard",["root"]);var p=r(85893);let Z=["className","raised"],m=e=>{let{classes:t}=e;return(0,i.Z)({root:["root"]},x,t)},f=(0,a.ZP)(d.Z,{name:"MuiCard",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({overflow:"hidden"})),j=l.forwardRef(function(e,t){let r=(0,c.Z)({props:e,name:"MuiCard"}),{className:l,raised:i=!1}=r,a=(0,n.Z)(r,Z),d=(0,o.Z)({},r,{raised:i}),h=m(d);return(0,p.jsx)(f,(0,o.Z)({className:(0,s.Z)(h.root,l),elevation:i?8:void 0,ref:t,ownerState:d},a))});var g=j},39766:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/cart",function(){return r(27712)}])},17576:function(e,t,r){"use strict";r.d(t,{Z:function(){return O}});var o=r(85893),n=r(67294),l=r(66720),s=r(65582),i=r(68239),a=r(22430),c=r(2734),d=r(98396),h=r(42293),u=r(10155),x=r(83321),p=r(93946),Z=r(69661),m=r(35294),f=r(4178),j=r(15861),g=r(77533),v=r(78462),b=r(76113),w=r(48885),y=r(59334),C=r(326);let S=["หน้าแรก","ผลิตภัณฑ์","ออกแบบ"];var k=()=>{let[e,t]=n.useState(!1);return(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(g.ZP,{anchor:"left",open:e,onClose:()=>t(!1),children:(0,o.jsx)(v.Z,{children:S.map((e,t)=>(0,o.jsx)(b.Z,{children:(0,o.jsx)(w.Z,{children:(0,o.jsx)(y.Z,{children:e})})},t))})}),(0,o.jsx)(p.Z,{sx:{color:"black"},onClick:()=>t(!e),children:(0,o.jsx)(C.Z,{color:"white"})})]})},E=r(87357),P=r(59741),_=r(25675),M=r.n(_),R=r(41664),z=r.n(R),B=r(42761),F=r(46624),N=r(9669),H=r(50838),I=r(39332),A=r(49925);let L=["โปรไฟล์","ออกจากระบบ"];function W(){let[e,t]=n.useState(null),{role:r,user:l}=(0,H.Eu)();"admin"==r?(L=["โปรไฟล์","แดชบอร์ด","ออกจากระบบ"],console.log(l)):"employee"==r?(L=["โปรไฟล์","แดชบอร์ด","ออกจากระบบ"],console.log(l)):(L=["โปรไฟล์","ออกจากระบบ"],console.log(l));let[s,g]=n.useState(""),[v,b]=n.useState(null),[w,y]=n.useState(null);n.useEffect(()=>{C()},[]);let C=async()=>{let e=l.uid,{result:r,error:o}=await (0,A.PR)("users",e);if(o)console.error("Error fetching collection:",o);else{let e=r.docs.map(e=>({id:e.id,name:e.data().name,email:e.data().email,tel:e.data().tel,img:e.data().profileUrl}));t(e)}},S=(0,N.v0)(),_=async()=>{try{await (0,N.w7)(S),console.log("User signed out")}catch(e){console.error("An error occurred while signing out:",e)}},R=(0,I.useRouter)(),W=e=>{"ออกจากระบบ"==e?_():"โปรไฟล์"==e?R.push("/account/profile"):"แดชบอร์ด"==e&&("admin"==r?R.push("/dashboard"):R.push("/product"))};console.log("ทดสอบpath",R.pathname),n.useEffect(()=>{g(R.pathname)},[R.pathname]);let O=(0,c.Z)();console.log(O);let D=(0,d.Z)(O.breakpoints.down("md"));console.log(D);let V=(0,i.Z)({typography:{fontFamily:"Prompt",fontSize:18},palette:{primary:{main:"#ffffff"}}});console.log("Current Path:",s);let T={Box:{transition:"0.1s","&:hover":{transition:"0.1s",color:"#018294"}},activeLink:{fontWeight:"bold",color:"#018294"}};return(0,o.jsx)(a.Z,{theme:V,children:(0,o.jsx)(h.Z,{position:"static",sx:{background:"white"},children:(0,o.jsxs)(u.Z,{children:[(0,o.jsx)(M(),{src:P.Z,alt:"logo",style:{objectFit:"cover",width:"4vw",height:"100%"},sx:{display:{xs:"flex",md:"none"},mr:1}}),D?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(k,{})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(z(),{style:{color:"black"},href:"/homepage",passHref:!0,onClick:e=>g("/homepage"),children:(0,o.jsx)(E.Z,{sx:"/homepage"===s?T.activeLink:T.Box,children:(0,o.jsx)(x.Z,{color:"inherit",children:"หน้าแรก"})})}),(0,o.jsx)(z(),{style:{color:"black"},href:"/catalog",passHref:!0,onClick:e=>g("/catalog"),children:(0,o.jsx)(E.Z,{sx:"/catalog"===s?T.activeLink:T.Box,children:(0,o.jsx)(x.Z,{color:"inherit",children:"ผลิตภัณฑ์"})})}),(0,o.jsx)(p.Z,{color:"black",sx:{marginLeft:"auto"},children:(0,o.jsx)(B.Z,{})}),(0,o.jsx)(z(),{href:"/cart",children:(0,o.jsx)(p.Z,{color:"black",children:(0,o.jsx)(F.Z,{})})}),(0,o.jsx)(p.Z,{onClick:e=>{y(e.currentTarget)},sx:{p:0},children:e&&e.map((e,t)=>(0,o.jsx)(E.Z,{children:(0,o.jsx)(Z.Z,{src:e.img,alt:"profile",sx:{width:32,height:32,ml:1}})},t))}),(0,o.jsx)(m.Z,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:w,anchorOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!w,onClose:()=>{y(null)},children:L.map(e=>(0,o.jsx)(f.Z,{onClick:()=>W(e),children:(0,o.jsx)(j.Z,{textAlign:"center",children:e})},e))})]})]})})})}function O(e){let{children:t}=e,{user:r,isAdmin:i}=(0,H.Eu)(),a=(0,I.useRouter)();return n.useEffect(()=>{null==r&&a.push("/")},[r]),(0,o.jsxs)(n.Fragment,{children:[(0,o.jsx)(l.ZP,{}),(0,o.jsxs)(s.Z,{maxWidth:"sx",sx:{bgcolor:"#FAF8F1"},style:{padding:"0px"},children:[(0,o.jsx)(W,{}),t]})]})}},27712:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var o=r(85893),n=r(17576),l=r(67294),s=r(68239),i=r(22430),a=r(87357),c=r(65582),d=r(12963),h=r(15861),u=r(83321),x=r(86886),p=r(72882),Z=r(7906),m=r(53184),f=r(53816),j=r(98102),g=r(93946),v=r(66242),b=r(44267),w=r(90629),y=r(46907),C=r(49925),S=r(96471),k=r(95291),E=r(41664),P=r.n(E);r(25675);var _=r(11163);r(34508);var M=r(50838),R=r(726),z=r(23279),B=r.n(z);function F(e){e.preventDefault(),console.info("You clicked a breadcrumb.")}function N(){let e=(0,_.useRouter)(),[t,r]=l.useState(null),[E,z]=l.useState(null),[N,H]=l.useState(null),[I,A]=l.useState(null),[L,W]=l.useState(0),[O,D]=l.useState(0),V=(0,M.Eu)(),T=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),$=(0,s.Z)({palette:{primary:{main:"#FE616A"}}}),[q,U]=l.useState(null),[X,K]=l.useState("");l.useEffect(()=>{G("")},[]),l.useEffect(()=>{},[t]);let Y=B()(async e=>{let o=V.user.uid;console.log("Fetched data:",{documentData:t,productData:N,colorData:I,groupedProductData:q});try{let t=await (0,R.Z)("cart","user_id",e),n=t.filter(e=>e.user_id==o),l=n.map(e=>e.product_id.id),s=n.map(e=>e.color_id.id);console.log("Product IDs:",l),console.log("Color IDs:",s);let i=await (0,C.KL)(l),a=await (0,C.Eq)(s);A(a),H(i),r(n);let c={};n.forEach(e=>{let t="".concat(e.color_id.id,"_").concat(e.product_id.id,"_").concat(e.price);c[t]?c[t].amount+=1:c[t]={...e,amount:1}}),U(Object.values(c))}catch(e){console.error("Error searching data:",e)}},500),G=e=>{K(e),Y(e)},[J,Q]=l.useState(0);return l.useEffect(()=>{if(E){let e=E.reduce((e,t)=>e+t.amount,0);Q(e)}},[E]),l.useEffect(()=>{if(q&&q.length>0){let e=0,t=0;q.forEach(r=>{e+=r.amount,t+=r.amount*r.price}),D(e),W(t)}},[q]),(0,o.jsx)(n.Z,{children:(0,o.jsx)(i.Z,{theme:$,children:(0,o.jsxs)(a.Z,{sx:{height:"100vh",width:"100%"},children:[(0,o.jsx)(c.Z,{maxWidth:"false",sx:{display:"flex",justifyContent:"center",bgcolor:"#FAF8F1"},children:(0,o.jsxs)(a.Z,{sx:{width:"70vw",pt:2,pb:2},children:[(0,o.jsx)("div",{role:"presentation",onClick:F,children:(0,o.jsxs)(d.Z,{"aria-label":"Beger",children:[(0,o.jsx)(P(),{style:{textDecoration:"none",color:"inherit"},sx:{color:"inherit","&:hover":{textDecoration:"underline"}},href:"/homepage",children:"หน้าแรก"}),(0,o.jsx)(h.Z,{color:"text.primary",children:"รถเข็น"})]})}),(0,o.jsx)(P(),{style:{textDecoration:"none"},sx:{color:"inherit","&:hover":{textDecoration:"underline"}},href:"/homepage",children:(0,o.jsx)(a.Z,{sx:{pt:2},children:(0,o.jsxs)(u.Z,{sx:{color:"#018294",bgcolor:"white",fontWeight:"bold",borderRadius:"50px",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)"},children:[(0,o.jsx)(S.Z,{}),(0,o.jsx)(h.Z,{children:" ย้อนกลับ"})]})})})]})}),(0,o.jsx)(c.Z,{maxWidth:!1,sx:{display:"flex",justifyContent:"center",bgcolor:"white"},children:(0,o.jsx)(a.Z,{sx:{p:3,width:"70vw"},children:(0,o.jsx)(x.ZP,{container:!0,spacing:2,children:t&&t.length>0?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(x.ZP,{item:!0,xs:12,md:9,children:[(0,o.jsx)(h.Z,{variant:"h4",sx:{fontWeight:"bold",pb:2,color:"#018294",fontSize:"30px"},children:"รถเข็นของฉัน"}),(0,o.jsx)(p.Z,{component:w.Z,children:(0,o.jsxs)(Z.Z,{sx:{minWidth:650},"aria-label":"simple table",children:[(0,o.jsx)(m.Z,{children:(0,o.jsxs)(f.Z,{children:[(0,o.jsx)(j.Z,{children:"รูปภาพ"}),(0,o.jsx)(j.Z,{children:"สินค้า"}),(0,o.jsx)(j.Z,{children:"สี"}),(0,o.jsx)(j.Z,{children:"ขนาด"}),(0,o.jsx)(j.Z,{children:"ราคา(บาท)"}),(0,o.jsx)(j.Z,{children:"จำนวน"}),(0,o.jsx)(j.Z,{})]})}),q&&q.map((e,t)=>{let r=N.find(t=>t.id===e.product_id.id);return(0,o.jsxs)(f.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,o.jsx)(j.Z,{component:"th",scope:"row",children:r&&(0,o.jsx)("img",{src:r.img,alt:r.name,width:60,height:60})}),(0,o.jsx)(j.Z,{children:r.name}),(0,o.jsx)(j.Z,{children:(0,o.jsx)(a.Z,{sx:{width:50,height:50,bgcolor:I.find(t=>t.id===e.color_id.id).code}})}),(0,o.jsx)(j.Z,{children:e.size}),(0,o.jsxs)(j.Z,{children:["฿",T(e.price)]}),(0,o.jsx)(j.Z,{children:e.amount}),(0,o.jsx)(j.Z,{children:(0,o.jsx)(g.Z,{children:(0,o.jsx)(y.Z,{})})})]},t)})]})})]}),(0,o.jsx)(x.ZP,{item:!0,xs:12,md:3,children:(0,o.jsx)(v.Z,{children:(0,o.jsxs)(b.Z,{children:[" ",(0,o.jsx)(h.Z,{gutterBottom:!0,variant:"h5",component:"div",sx:{color:"#018294",fontWeight:"bold"},children:"สรุปรายการสั่งซื้อ"}),(0,o.jsxs)(h.Z,{children:["ยอดรวมสินค้า (",O," ชิ้น)"]}),(0,o.jsx)("hr",{}),(0,o.jsxs)(a.Z,{sx:{display:"flex",justifyContent:"space-between"},children:[(0,o.jsx)(h.Z,{gutterBottom:!0,variant:"h8",component:"div",children:"ยอดรวมสุทธิ"}),(0,o.jsxs)(h.Z,{gutterBottom:!0,variant:"h8",component:"div",children:["฿",T(L)]})]}),(0,o.jsx)(u.Z,{variant:"contained",sx:{p:1,bgcolor:"#FE616A"},fullWidth:!0,onClick:()=>{e.push({pathname:"/cart/selectaddress"})},children:"ยืนยันคำสั่งซื้อ"})]})})})]}):(0,o.jsx)(x.ZP,{container:!0,justifyContent:"center",alignItems:"center",style:{height:"50vh"},children:(0,o.jsxs)(x.ZP,{item:!0,xs:12,textAlign:"center",children:[(0,o.jsx)(k.Z,{style:{fontSize:80,color:"gray"}}),(0,o.jsx)(h.Z,{variant:"h6",sx:{fontWeight:"bold"},children:"ไม่มีสินค้าอยู่ในรถเข็น"})]})})})})})]})})})}}},function(e){e.O(0,[2607,9078,7393,6298,6886,505,3717,3914,945,7451,4792,7199,9342,4507,8010,4508,9774,2888,179],function(){return e(e.s=39766)}),_N_E=e.O()}]);