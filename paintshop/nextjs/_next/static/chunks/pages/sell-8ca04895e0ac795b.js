(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6276],{69222:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sell",function(){return n(72328)}])},726:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});var r=n(36100),i=n(11802);let c=(0,r.ad)(i.Z);async function a(e,t,n){try{let i=t.toLowerCase(),a=n.toLowerCase(),l=(0,r.IO)((0,r.hJ)(c,e),(0,r.Xo)(i)),s=await (0,r.PL)(l),o=s.docs.filter(e=>{let t=e.data()[i];return t&&-1!==t.toLowerCase().indexOf(a)}).map(e=>({id:e.id,...e.data()}));return o}catch(e){throw console.error("Error searching data:",e),e}}},72328:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return E}});var r=n(85893),i=n(87357),c=n(9913),a=n(90948),l=n(98102),s=n(89755),o=n(53816),d=n(68239),h=n(22430),u=n(15861),x=n(72882),m=n(90629),g=n(7906),j=n(53184),f=n(295),p=n(83321),Z=n(25675),_=n.n(Z),w=n(67294),y=n(49925),C=n(99061),N=n(79944),S=n(11163);function E(){let e=(0,a.ZP)(l.Z)(e=>{let{theme:t}=e;return{["&.".concat(s.Z.head)]:{backgroundColor:"#018294",color:t.palette.common.white},["&.".concat(s.Z.body)]:{fontSize:14,maxWidth:"200px"}}}),t=(0,a.ZP)(o.Z)(e=>{let{theme:t}=e;return{"&:nth-of-type(odd)":{backgroundColor:t.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}}),n=(0,d.Z)({palette:{primary:{main:"#018294"},success:{main:"#A9C470"},error:{main:"#FE616A"}}}),Z=(0,S.useRouter)(),{productData:E,fetchProductData:b}=(0,w.useContext)(C.H),{userData:k,fetchUserData:v}=(0,w.useContext)(N.S),[A,L]=(0,w.useState)([]),[P,O]=(0,w.useState)([]);(0,w.useEffect)(()=>{v(),b(),T()},[]);let T=async()=>{let{result:e,error:t}=await (0,y._N)("orders");if(t)console.error("Error fetching document:",t);else if(e){let t=e.docs.map(e=>({id:e.id,...e.data()}));L(t)}},H=A.map((e,t)=>{var n;let r=e.createAt?e.createAt.toDate().toLocaleString("th-TH",{dateStyle:"medium"}):"",i=e.createAt?e.createAt.toDate().toLocaleString("th-TH",{timeStyle:"short"}):"",c=k.find(t=>t.id===e.user_id),a=c?c.name:e.user_id;return n=e.id,{No:t+1,date:r,time:i,name:a,id:n,total_price:e.total_price,img:e.img,status:e.status}});return(0,r.jsx)(c.Z,{children:(0,r.jsx)(h.Z,{theme:n,children:(0,r.jsx)(i.Z,{children:(0,r.jsxs)(i.Z,{sx:{height:"100%",width:"100%",mt:5},children:[(0,r.jsx)(u.Z,{sx:{fontSize:"2rem",fontWeight:"600"},children:"รายการขาย"}),(0,r.jsx)(x.Z,{component:m.Z,sx:{borderRadius:"25px",mt:5},children:(0,r.jsxs)(g.Z,{sx:{minWidth:700},children:[(0,r.jsx)(j.Z,{children:(0,r.jsxs)(o.Z,{children:[(0,r.jsx)(e,{align:"center",children:"No."}),(0,r.jsx)(e,{align:"center",children:"วันที่"}),(0,r.jsx)(e,{align:"center",children:"เวลา"}),(0,r.jsx)(e,{align:"center",children:"ชื่อลูกค้า"}),(0,r.jsx)(e,{align:"center",children:"รายการคำสั่งซื้อ"}),(0,r.jsx)(e,{align:"center",children:"ยอดรวม"}),(0,r.jsx)(e,{align:"center",children:"หลักฐานการชำระเงิน"}),(0,r.jsx)(e,{align:"center",children:"สถานะคำสั่งซื้อ"}),(0,r.jsx)(e,{align:"center"})]})}),(0,r.jsx)(f.Z,{children:H.map(n=>(0,r.jsxs)(t,{children:[(0,r.jsx)(e,{component:"th",scope:"row",align:"center",children:n.No}),(0,r.jsx)(e,{align:"center",children:n.date}),(0,r.jsx)(e,{align:"center",children:n.time}),(0,r.jsx)(e,{align:"center",children:n.name}),(0,r.jsx)(e,{align:"center",children:n.id}),(0,r.jsx)(e,{align:"center",children:n.total_price}),(0,r.jsx)(e,{align:"center",children:(0,r.jsx)(_(),{src:n.img,alt:"Product Image",priority:!0,height:"75",width:"75"})}),(0,r.jsx)(e,{align:"center",children:n.status}),(0,r.jsx)(e,{align:"center",children:(0,r.jsx)(p.Z,{color:"primary",onClick:()=>{var e;return e=n.id,void Z.push({pathname:"sell/detail",query:{id:JSON.stringify(e)}})},children:"ดูรายละเอียด"})})]},n.No))})]})})]})})})})}n(726),n(23279)}},function(e){e.O(0,[2607,7609,5675,6185,1283,3717,3914,9254,5048,9913,9774,2888,179],function(){return e(e.s=69222)}),_N_E=e.O()}]);