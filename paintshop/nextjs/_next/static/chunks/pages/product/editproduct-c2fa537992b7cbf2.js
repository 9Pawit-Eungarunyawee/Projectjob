(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2596],{28286:function(e,l,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/product/editproduct",function(){return t(17098)}])},53233:function(e,l,t){"use strict";t.d(l,{Z:function(){return i}});var a=t(11802),s=t(36100);let r=(0,s.ad)(a.Z);async function i(e,l,t){let a=null,i=null;if(t.catalog_id){let e=(0,s.JU)(r,"catalog",t.catalog_id);t.catalog_id=e}try{a=await (0,s.pl)((0,s.JU)(r,e,l),t,{merge:!0}),console.log("แก้ไขสำเร็จ",a)}catch(e){console.error("เกิดข้อผิดพลาดในการแก้ไขข้อมูล:",i=e)}return{result:a,error:i}}},17098:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return _}});var a=t(85893),s=t(9913),r=t(49925),i=t(68239),n=t(46901),c=t(22430),d=t(58703),o=t(15861),u=t(83321),x=t(86886),h=t(94054),m=t(98271),p=t(4178),Z=t(87357),j=t(50480),g=t(85071),v=t(25675),f=t.n(v),b=t(96471),C=t(67294),w=t(53233),S=t(11163);function _(){let e=(0,i.Z)({palette:{primary:{main:"#018294"},success:{main:"#A9C470"},error:{main:"#FE616A"}}}),[l,t]=(0,C.useState)(""),[v,_]=(0,C.useState)([{size:"",amount:"",price:"",cost:""}]),[y,z]=(0,C.useState)(""),[k,q]=(0,C.useState)(!1),[E,W]=(0,C.useState)(""),[N,P]=(0,C.useState)(""),[R,A]=(0,C.useState)(""),[U,D]=(0,C.useState)(""),[F,I]=(0,C.useState)(""),[J,O]=(0,C.useState)(null);(0,C.useEffect)(()=>{console.log(v)},[v]);let T=(e,l,t)=>{let a=[...v];a[l][t]=e.target.value,_(a)},X=e=>{if(v.length>1){let l=[...v];l.splice(e,1),_(l)}else v.length<=1&&(O((0,a.jsx)(n.Z,{severity:"error",onClose:Y,children:"ต้องมีรูปแบบสินค้าอย่างน้อย 1 รูปแบบ"})),V(!0))};(0,C.useEffect)(()=>{L(),K()},[]);let[$,H]=(0,C.useState)(null),L=async()=>{let{result:e,error:l}=await (0,r._N)("catalog");if(l)console.error("Error fetching document:",l);else if(e){let l=e.docs.map(e=>({id:e.id,name:e.data().name}));H(l)}},B=(0,S.useRouter)(),G=JSON.parse(B.query.product_id),K=async()=>{let{result:e,error:l}=await (0,r.ZP)("products",G);if(l)console.error("Error fetching document:",l);else if(e){let l=e.data();W(l.name),z(l.area),A(l.flim),D(l.grade),I(l.detail),_(l.productSizes),t(l.img),q(l.status),P(l.catalog_id.id)}},M=async e=>{e.preventDefault();let t=await (0,w.Z)("products",G,{name:E,catalog_id:N,detail:F,flim:R,grade:U,area:y,status:k,img:l,productSizes:v});t?(O((0,a.jsxs)(n.Z,{severity:"success",onClose:Y,children:["แก้ไขข้อมูลสำเร็จ"," "]})),V(!0)):(O((0,a.jsx)(n.Z,{severity:"error",onClose:Y,children:"ผิดพลาด! ไม่สามารถแก้ไขข้อมูลได้"})),V(!0))},[Q,V]=(0,C.useState)(!1),Y=(e,l)=>{"clickaway"!==l&&V(!1)};return(0,a.jsx)(s.Z,{children:(0,a.jsxs)(c.Z,{theme:e,children:[(0,a.jsx)(d.Z,{open:Q,autoHideDuration:6e3,onClose:Y,children:J}),(0,a.jsx)(o.Z,{sx:{fontSize:"2rem",fontWeight:"600",mt:4},children:"แก้ไขสินค้า"}),(0,a.jsxs)(u.Z,{sx:{color:"#018294",bgcolor:"white",fontWeight:"bold",borderRadius:"50px",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)"},onClick:()=>{window.history.back()},children:[(0,a.jsx)(b.Z,{}),(0,a.jsx)(o.Z,{children:" ย้อนกลับ"})]}),(0,a.jsx)(x.ZP,{container:!0,spacing:0,sx:{mt:3,mb:5,backgroundColor:"#fff",p:2,borderRadius:"10px",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)"},children:(0,a.jsx)(x.ZP,{item:!0,xs:12,sm:7,children:(0,a.jsxs)("form",{onSubmit:M,className:"form",children:[(0,a.jsxs)(h.Z,{fullWidth:!0,children:[(0,a.jsx)(o.Z,{children:"แคตตาล็อก:"}),(0,a.jsxs)(m.Z,{value:N,onChange:e=>P(e.target.value),size:"small",select:!0,label:"เลือกแคตตาล็อก",required:!0,children:[(0,a.jsx)(p.Z,{value:"",children:"กรุณาเลือกแคตตาล็อก"}),$&&$.map(e=>(0,a.jsx)(p.Z,{value:e.id,children:e.name},e.id))]}),(0,a.jsx)(o.Z,{sx:{mt:1},children:"ข้อมูลสินค้า:"}),(0,a.jsx)(m.Z,{variant:"outlined",value:E,label:"ชื่อสินค้า",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>W(e.target.value)}),(0,a.jsxs)(m.Z,{value:String(y),onChange:e=>z(e.target.value),size:"small",select:!0,label:"พื้นที่ใช้งาน",sx:{mt:1,mb:1},required:!0,children:[(0,a.jsx)(p.Z,{value:"สีทาภายนอก",children:"สีทาภายนอก"}),(0,a.jsx)(p.Z,{value:"สีทาภายใน",children:"สีทาภายใน"}),(0,a.jsx)(p.Z,{value:"สีน้ำมัน",children:"สีน้ำมัน"}),(0,a.jsx)(p.Z,{value:"สีย้อมไม้",children:"สีย้อมไม้"})]}),(0,a.jsxs)(m.Z,{value:R,onChange:e=>A(e.target.value),size:"small",select:!0,label:"ฟิล์ม",sx:{mt:1,mb:1},required:!0,children:[(0,a.jsx)(p.Z,{value:"ฟิล์มสีชนิดเงา",children:"ฟิล์มสีชนิดเงา"}),(0,a.jsx)(p.Z,{value:"ฟิล์มสีชนิดกึ่งเงา",children:"ฟิล์มสีชนิดกึ่งเงา"}),(0,a.jsxs)(p.Z,{value:"ฟิล์มสีชนิดเนียน",children:["ฟิล์มสีชนิดเนียน"," "]}),(0,a.jsx)(p.Z,{value:"ฟิล์มสีชนิดด้าน",children:"ฟิล์มสีชนิดด้าน"})]}),(0,a.jsxs)(m.Z,{value:U,onChange:e=>D(e.target.value),size:"small",select:!0,label:"เกรด",sx:{mt:1,mb:1},required:!0,children:[(0,a.jsx)(p.Z,{value:"เกรดอัลตร้าพรีเมี่ยม อายุการใช้งาน 15 ปี",children:"เกรดอัลตร้าพรีเมี่ยม อายุการใช้งาน 15 ปี"}),(0,a.jsx)(p.Z,{value:"เกรดพรีเมี่ยม อายุการใช้งาน 10 ปี",children:"เกรดพรีเมี่ยม อายุการใช้งาน 10 ปี"}),(0,a.jsx)(p.Z,{value:"เกรดมาตรฐานบน 5-7 ปี",children:"เกรดมาตรฐานบน 5-7 ปี"}),(0,a.jsx)(p.Z,{value:"เกรดมาตรฐาน 3-5 ปี",children:"เกรดมาตรฐาน 3-5 ปี"}),(0,a.jsx)(p.Z,{value:"เกรดประหยัด 1-3 ปี",children:"เกรดประหยัด 1-3 ปี"})]}),(0,a.jsx)(m.Z,{value:F,onChange:e=>I(e.target.value),variant:"outlined",label:"รายละเอียดสินค้า",fullWidth:!0,required:!0,rows:4,multiline:!0,size:"small",sx:{mt:1,mb:1}}),(0,a.jsx)(o.Z,{children:" รูปแบบสินค้า: "}),(0,a.jsx)(u.Z,{variant:"contained",fullWidth:!0,sx:{mr:2,mb:2,mt:2,width:"200px"},onClick:()=>{_([...v,{size:"",quantity:"",price:"",cost:""}])},children:"เพิ่มรูปแบบสินค้า"}),v.map((e,l)=>(0,a.jsxs)(Z.Z,{sx:{borderRadius:"10px",mb:3,p:2,boxShadow:"rgba(6, 24, 44, 0.4) 0px 0px 0px 2px, rgba(6, 24, 44, 0.65) 0px 4px 6px -1px, rgba(255, 255, 255, 0.08) 0px 1px 0px inset"},children:[(0,a.jsxs)(o.Z,{children:[" รูปแบบที่:",l+1," "]}),(0,a.jsxs)(m.Z,{value:e.size,onChange:e=>T(e,l,"size"),size:"small",select:!0,fullWidth:!0,label:"ขนาด",sx:{mt:1,mb:1},required:!0,children:[(0,a.jsx)(p.Z,{value:"",children:"กรุณาเลือกขนาดบรรจุ"}),(0,a.jsx)(p.Z,{value:"1/4 แกลลอน",children:"1/4 แกลลอน"}),(0,a.jsx)(p.Z,{value:"1 แกลลอน",children:"1 แกลลอน"}),(0,a.jsx)(p.Z,{value:"2.5 แกลลอน",children:"2.5 แกลลอน"}),(0,a.jsx)(p.Z,{value:"5 แกลลอน",children:"5 แกลลอน"})]}),(0,a.jsx)(m.Z,{value:e.price,variant:"outlined",onChange:e=>{let t=e.target.value;(/^\d*$/.test(t)||""===t)&&(""===t||parseInt(t)>=0&&"0"!==t[0])&&T(e,l,"price")},label:"ราคาขาย",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1}}),(0,a.jsx)(m.Z,{value:e.cost,variant:"outlined",onChange:e=>{let t=e.target.value;(/^\d*$/.test(t)||""===t)&&(""===t||parseInt(t)>=0&&"0"!==t[0])&&T(e,l,"cost")},label:"ราคาซื้อ",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1}}),(0,a.jsx)(u.Z,{variant:"contained",color:"error",fullWidth:!0,onClick:()=>X(l),children:"ลบ"})]},l)),(0,a.jsxs)(Z.Z,{sx:{textAlign:"left"},children:[(0,a.jsx)(o.Z,{sx:{mb:1},children:"รูปภาพสินค้า:"}),(0,a.jsx)(Z.Z,{children:l&&(0,a.jsx)(f(),{src:l,alt:"Uploaded Image",priority:!0,height:"150",width:"150",style:{border:"1px solid rgba(0, 0, 0, 0.50)"}})}),(0,a.jsxs)("label",{htmlFor:"upload-image",children:[(0,a.jsx)(u.Z,{variant:"contained",component:"span",children:"เพิ่มรูปภาพสินค้า"}),(0,a.jsx)("input",{id:"upload-image",hidden:!0,accept:"image/*",type:"file",onChange:e=>{let l=e.target.files[0];if(!l){console.error("No file selected."),t("");return}let a=new FileReader;a.onloadend=()=>{t(a.result)},a.readAsDataURL(l)}})]})]}),(0,a.jsx)(Z.Z,{children:(0,a.jsx)(j.Z,{sx:{m:0},control:(0,a.jsx)(g.Z,{checked:k,onChange:e=>{q(e.target.checked)}}),label:"เปิดให้สั่งซื้อ:",labelPlacement:"start"})})]}),(0,a.jsx)(u.Z,{variant:"contained",color:"success",sx:{mr:2,mb:2,mt:2},type:"submit",children:"แก้ไขสินค้า"})]})})})]})})}}},function(e){e.O(0,[2607,7609,5675,6298,6185,1283,3717,3914,8360,8271,4792,187,9913,9774,2888,179],function(){return e(e.s=28286)}),_N_E=e.O()}]);