(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9090],{31425:function(e,o,t){"use strict";t.d(o,{Z:function(){return Z}});var r=t(63366),n=t(87462),a=t(67294),i=t(86010),l=t(94780),s=t(90948),c=t(71657),u=t(1588),d=t(34867);function f(e){return(0,d.Z)("MuiDialogActions",e)}(0,u.Z)("MuiDialogActions",["root","spacing"]);var g=t(85893);let p=["className","disableSpacing"],m=e=>{let{classes:o,disableSpacing:t}=e;return(0,l.Z)({root:["root",!t&&"spacing"]},f,o)},v=(0,s.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,o)=>{let{ownerState:t}=e;return[o.root,!t.disableSpacing&&o.spacing]}})(({ownerState:e})=>(0,n.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),h=a.forwardRef(function(e,o){let t=(0,c.Z)({props:e,name:"MuiDialogActions"}),{className:a,disableSpacing:l=!1}=t,s=(0,r.Z)(t,p),u=(0,n.Z)({},t,{disableSpacing:l}),d=m(u);return(0,g.jsx)(v,(0,n.Z)({className:(0,i.Z)(d.root,a),ownerState:u,ref:o},s))});var Z=h},93946:function(e,o,t){"use strict";t.d(o,{Z:function(){return S}});var r=t(63366),n=t(87462),a=t(67294),i=t(86010),l=t(94780),s=t(41796),c=t(90948),u=t(71657),d=t(82607),f=t(98216),g=t(1588),p=t(34867);function m(e){return(0,p.Z)("MuiIconButton",e)}let v=(0,g.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]);var h=t(85893);let Z=["edge","children","className","color","disabled","disableFocusRipple","size"],b=e=>{let{classes:o,disabled:t,color:r,edge:n,size:a}=e,i={root:["root",t&&"disabled","default"!==r&&`color${(0,f.Z)(r)}`,n&&`edge${(0,f.Z)(n)}`,`size${(0,f.Z)(a)}`]};return(0,l.Z)(i,m,o)},x=(0,c.ZP)(d.Z,{name:"MuiIconButton",slot:"Root",overridesResolver:(e,o)=>{let{ownerState:t}=e;return[o.root,"default"!==t.color&&o[`color${(0,f.Z)(t.color)}`],t.edge&&o[`edge${(0,f.Z)(t.edge)}`],o[`size${(0,f.Z)(t.size)}`]]}})(({theme:e,ownerState:o})=>(0,n.Z)({textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(e.vars||e).palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},!o.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,s.Fq)(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===o.edge&&{marginLeft:"small"===o.size?-3:-12},"end"===o.edge&&{marginRight:"small"===o.size?-3:-12}),({theme:e,ownerState:o})=>{var t;let r=null==(t=(e.vars||e).palette)?void 0:t[o.color];return(0,n.Z)({},"inherit"===o.color&&{color:"inherit"},"inherit"!==o.color&&"default"!==o.color&&(0,n.Z)({color:null==r?void 0:r.main},!o.disableRipple&&{"&:hover":(0,n.Z)({},r&&{backgroundColor:e.vars?`rgba(${r.mainChannel} / ${e.vars.palette.action.hoverOpacity})`:(0,s.Fq)(r.main,e.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),"small"===o.size&&{padding:5,fontSize:e.typography.pxToRem(18)},"large"===o.size&&{padding:12,fontSize:e.typography.pxToRem(28)},{[`&.${v.disabled}`]:{backgroundColor:"transparent",color:(e.vars||e).palette.action.disabled}})}),y=a.forwardRef(function(e,o){let t=(0,u.Z)({props:e,name:"MuiIconButton"}),{edge:a=!1,children:l,className:s,color:c="default",disabled:d=!1,disableFocusRipple:f=!1,size:g="medium"}=t,p=(0,r.Z)(t,Z),m=(0,n.Z)({},t,{edge:a,color:c,disabled:d,disableFocusRipple:f,size:g}),v=b(m);return(0,h.jsx)(x,(0,n.Z)({className:(0,i.Z)(v.root,s),centerRipple:!0,focusRipple:!f,disabled:d,ref:o,ownerState:m},p,{children:l}))});var S=y},71579:function(e,o,t){"use strict";t.d(o,{Z:function(){return n}});var r=t(67294),n=function(e,o){return r.isValidElement(e)&&-1!==o.indexOf(e.type.muiName)}},1132:function(e,o,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/account/profile/dialog",function(){return t(15517)}])},53233:function(e,o,t){"use strict";t.d(o,{Z:function(){return i}});var r=t(11802),n=t(36100);let a=(0,n.ad)(r.Z);async function i(e,o,t){let r=null,i=null;if(t.catalog_id){let e=(0,n.JU)(a,"catalog",t.catalog_id);t.catalog_id=e}try{r=await (0,n.pl)((0,n.JU)(a,e,o),t,{merge:!0}),console.log("แก้ไขสำเร็จ",r)}catch(e){console.error("เกิดข้อผิดพลาดในการแก้ไขข้อมูล:",i=e)}return{result:r,error:i}}},15517:function(e,o,t){"use strict";t.r(o),t.d(o,{default:function(){return h}});var r=t(85893),n=t(67294),a=t(46901),i=t(50657),l=t(37645),s=t(58703),c=t(6514),u=t(98271),d=t(31425),f=t(83321),g=t(50838),p=t(49925),m=t(11163),v=t(53233);function h(e){let{handleClickOpen:o,onFormSubmitSuccess:t}=e,[h,Z]=n.useState(!1),[b,x]=n.useState(!1),[y,S]=n.useState(""),[C,R]=n.useState(""),[j,w]=n.useState(""),[z,k]=n.useState(null),_=(0,g.Eu)();(0,m.useRouter)();let E=async()=>{Z(!0),o(),await M()},N=()=>{Z(!1)},$=async e=>{e.preventDefault(),console.log("Handling form submission"),N();let o={email:j,name:y,tel:C};console.log("Submitting form with data:",o);let{result:n,error:i}=await (0,v.Z)("users",_.user.uid,o);console.log("Result:",n),console.log("Error:",i),i?(k((0,r.jsx)(a.Z,{severity:"error",children:"ผิดพลาด! ไม่สามารถแก้ไข้ข้อมูลได้"})),x(!0)):(k((0,r.jsx)(a.Z,{severity:"success",children:"แก้ไข้ข้อมูลสำเร็จ"})),t(),x(!0))},M=async()=>{let e=_.user.uid,{result:o,error:t}=await (0,p.PR)("users",e);if(t)console.error("Error fetching document:",t);else if(o.docs.length>0){let e=o.docs[0].data();S(e.name),w(e.email),R(e.tel)}};return n.useEffect(()=>{M()},[]),(0,r.jsxs)(n.Fragment,{children:[(0,r.jsxs)(i.Z,{open:h,onClose:N,children:[(0,r.jsx)(l.Z,{sx:{fontWeight:"bold"},children:"แก้ไขข้อมูลส่วนตัว"}),(0,r.jsx)(s.Z,{open:h,autoHideDuration:6e3,onClose:(e,o)=>{"clickaway"!==o&&x(!1)},children:z}),(0,r.jsxs)("form",{onSubmit:$,className:"form",children:[(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(u.Z,{variant:"outlined",value:String(y),label:"ชื่อ",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>S(e.target.value)}),(0,r.jsx)(u.Z,{variant:"outlined",value:String(j),label:"อีเมล",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>w(e.target.value)}),(0,r.jsx)(u.Z,{variant:"outlined",label:"เบอร์ติดต่อ",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>R(e.target.value),value:String(C)})]}),(0,r.jsxs)(d.Z,{children:[(0,r.jsx)(f.Z,{variant:"outlined",onClick:N,sx:{borderColor:"#018294",color:"#018294",mb:4,"&:hover":{backgroundColor:"#018294",color:"#fff"}},children:"ยกเลิก"}),(0,r.jsx)(f.Z,{variant:"contained",sx:{backgroundColor:"#018294",color:"#fff",mb:4,"&:hover":{backgroundColor:"#01576e"}},type:"submit",children:"บันทึก"})]})]})]}),(0,r.jsx)(f.Z,{sx:{color:"#018294"},onClick:E,children:"แก้ไข"})]})}},11163:function(e,o,t){e.exports=t(96885)}},function(e){e.O(0,[2607,7609,6298,8360,8271,4163,4792,9774,2888,179],function(){return e(e.s=1132)}),_N_E=e.O()}]);