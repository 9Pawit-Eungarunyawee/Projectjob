(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8739],{29366:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/employee/profile",function(){return r(44701)}])},53233:function(e,s,r){"use strict";r.d(s,{Z:function(){return l}});var t=r(11802),i=r(36100);let n=(0,i.ad)(t.Z);async function l(e,s,r){let t=null,l=null;if(r.catalog_id){let e=(0,i.JU)(n,"catalog",r.catalog_id);r.catalog_id=e}try{t=await (0,i.pl)((0,i.JU)(n,e,s),r,{merge:!0}),console.log("แก้ไขสำเร็จ",t)}catch(e){console.error("เกิดข้อผิดพลาดในการแก้ไขข้อมูล:",l=e)}return{result:t,error:l}}},98583:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return u}});var t=r(85893),i=r(11463),n=r(50657),l=r(37645),a=r(6514),o=r(15861),c=r(98271),d=r(31425),x=r(83321),h=r(67294);function u(e){let{open:s,style:r,handleClose:u,name:m,handleFireForm:j}=e,[p,Z]=(0,h.useState)("");return(0,t.jsx)(i.a,{theme:r,children:(0,t.jsxs)(n.Z,{open:s,onClose:u,maxWidth:"xs",fullWidth:!0,children:[(0,t.jsx)(l.Z,{children:"เลิกจ้างพนักงาน"}),(0,t.jsxs)(a.Z,{children:[(0,t.jsx)(o.Z,{children:"กรอกชื่อพนักงานเพื่อยืนยัน"}),(0,t.jsx)(c.Z,{onChange:e=>Z(e.target.value),size:"small",fullWidth:!0,label:"ชื่อพนักงาน",sx:{mt:1,mb:1},required:!0}),(0,t.jsxs)(o.Z,{color:"text.secondary",children:["ชื่อ: ",m]})]}),(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(x.Z,{variant:"contained",color:"success",onClick:u,children:"ยกเลิก"}),(0,t.jsx)(x.Z,{variant:"contained",color:"error",onClick:e=>{e.preventDefault(),j(),u()},disabled:p!==m,children:"เลิกจ้าง"})]})]})})}},26196:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return h}});var t=r(85893);r(53233);var i=r(22430),n=r(50657),l=r(37645),a=r(6514),o=r(98271),c=r(4178),d=r(31425),x=r(83321);function h(e){let{handleClose:s,handleForm:r,open:h,style:u,salary:m,position:j,setPosition:p,setSalary:Z,isFormerEmployee:f}=e;return(0,t.jsx)(i.Z,{theme:u,children:(0,t.jsxs)(n.Z,{open:h,onClose:s,maxWidth:"xs",fullWidth:!0,children:[(0,t.jsxs)(l.Z,{children:[f&&(0,t.jsx)(t.Fragment,{children:"จ้างพนักงาน"}),!f&&(0,t.jsx)(t.Fragment,{children:"แก้ไขพนักงาน"})]}),(0,t.jsxs)(a.Z,{children:[(0,t.jsxs)(o.Z,{value:j,onChange:e=>p(e.target.value),size:"small",fullWidth:!0,select:!0,label:"ตำแหน่ง",sx:{mt:1,mb:1},required:!0,children:[(0,t.jsx)(c.Z,{value:"รับลูกค้า",children:"รับลูกค้า"}),(0,t.jsx)(c.Z,{value:"จัดการคลังสินค้า",children:"จัดการคลังสินค้า"})]}),(0,t.jsx)(o.Z,{variant:"outlined",label:"เงินเดือน",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>{let s=e.target.value;(/^\d*$/.test(s)||""===s)&&(""===s||parseInt(s)>0&&"0"!==s[0])&&Z(s)},value:String(m)})]}),(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(x.Z,{variant:"contained",color:"error",onClick:s,children:"ยกเลิก"}),(0,t.jsxs)(x.Z,{variant:"contained",color:"success",onClick:e=>{e.preventDefault(),r(m,j),s()},children:[f&&(0,t.jsx)(t.Fragment,{children:"ยืนยัน"}),!f&&(0,t.jsx)(t.Fragment,{children:"แก้ไขพนักงาน"})]})]})]})})}r(67294)},44701:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return b}});var t=r(85893),i=r(9913),n=r(53233),l=r(49925),a=r(68239),o=r(46901),c=r(58703),d=r(87357),x=r(15861),h=r(83321),u=r(22430),m=r(86886),j=r(25675),p=r.n(j),Z=r(11163),f=r(67294),y=r(26196),v=r(98583),g=r(96471);function b(){let e=(0,Z.useRouter)(),s=JSON.parse(e.query.employeeData),[r,j]=(0,f.useState)("/../public/default-profile.jpg"),[b,w]=(0,f.useState)(""),[C,S]=(0,f.useState)(""),[k,F]=(0,f.useState)([]),[_,P]=(0,f.useState)(""),[E,W]=(0,f.useState)(""),[B,z]=(0,f.useState)(""),[N,q]=(0,f.useState)(""),[D,R]=(0,f.useState)(""),[J,O]=(0,f.useState)(null),[T,U]=(0,f.useState)(!1),A=N.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),X=(0,a.Z)({palette:{primary:{main:"#018294"},success:{main:"#A9C470"},error:{main:"#FE616A"}},typography:{text:{fontSize:"1.2rem",padding:"1vw",width:"10rem"},data:{fontSize:"1.2rem",fontWeight:"600",whiteSpace:"pre-line"}}}),H=()=>{window.history.back()};(0,f.useEffect)(()=>{I()},[]);let I=async()=>{let{result:e,error:r}=await (0,l.ZP)("users",s);if(r)console.error("Error fetching document:",r);else if(e){let s=e.data();U(s.isFormerEmployee),w(s.name),z(s.email),S(s.tel),F(s.addresses[0]),j(s.profileUrl),s.salary&&(P(s.salary),q(s.salary)),s.position&&(W(s.position),R(s.position))}},$=async(e,r)=>{let i=await (0,n.Z)("users",s,{role:"employee",position:r,salary:e,isFormerEmployee:!1});i?(I(),O((0,t.jsx)(o.Z,{severity:"success",onClose:Y,children:"แก้ไข้ข้อมูลสำเร็จ"})),Q(!0)):(O((0,t.jsx)(o.Z,{severity:"error",onClose:Y,children:"ผิดพลาด! ไม่สามารถแก้ไข้ข้อมูลได้"})),Q(!0))},G=async()=>{let e=await (0,n.Z)("users",s,{role:"user",position:"",salary:"",isFormerEmployee:!0});e?(I(),O((0,t.jsx)(o.Z,{severity:"success",onClose:Y,children:"เลิกจ้างสำเร็จ"})),Q(!0)):(O((0,t.jsx)(o.Z,{severity:"error",onClose:Y,children:"ผิดพลาด! ไม่สามารถเลิกจ้างได้"})),Q(!0)),setTimeout(()=>{H()},500)},[K,L]=(0,f.useState)(!1),[M,Q]=(0,f.useState)(!1),V=()=>{L(!0)},Y=(e,s)=>{"clickaway"!==s&&Q(!1)},[ee,es]=(0,f.useState)(!1);return(0,t.jsxs)(i.Z,{children:[(0,t.jsx)(c.Z,{open:M,autoHideDuration:6e3,onClose:Y,children:J}),(0,t.jsx)(y.default,{handleClose:()=>{L(!1)},open:K,handleForm:$,style:X,salary:_,position:E,setSalary:P,setPosition:W,isFormerEmployee:T}),(0,t.jsx)(v.default,{open:ee,handleClose:()=>{es(!1)},style:X,name:b,handleFireForm:G}),(0,t.jsxs)(d.Z,{children:[(0,t.jsx)(x.Z,{sx:{fontSize:"2rem",fontWeight:"600",mt:5},children:"ข้อมูลพนักงาน"}),(0,t.jsxs)(h.Z,{sx:{color:"#018294",bgcolor:"white",fontWeight:"bold",borderRadius:"50px",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)"},onClick:H,children:[(0,t.jsx)(g.Z,{}),(0,t.jsx)(x.Z,{children:" ย้อนกลับ"})]}),(0,t.jsx)(u.Z,{theme:X,children:(0,t.jsxs)(m.ZP,{container:!0,spacing:0,sx:{mt:3,mb:5,backgroundColor:"#fff",p:2,borderRadius:"10px",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)"},children:[(0,t.jsx)(m.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center"},children:(0,t.jsx)(p(),{src:r,priority:!0,alt:"profile",width:120,height:120,style:{borderRadius:"100px",objectFit:"cover"}})}),(0,t.jsxs)(m.ZP,{item:!0,xs:12,sx:{display:{md:"flex"},borderBottom:"1px solid #ccc",p:1},children:[(0,t.jsx)(d.Z,{sx:{width:"15rem"},children:(0,t.jsx)(x.Z,{variant:"text",children:"ชื่อ:"})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(x.Z,{variant:"data",children:b})})]}),(0,t.jsxs)(m.ZP,{item:!0,xs:12,sx:{display:{md:"flex"},borderBottom:"1px solid #ccc",p:1},children:[(0,t.jsx)(d.Z,{sx:{width:"15rem"},children:(0,t.jsx)(x.Z,{variant:"text",children:"เบอร์ติดต่อ:"})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(x.Z,{variant:"data",children:C})})]}),(0,t.jsxs)(m.ZP,{item:!0,xs:12,sx:{display:{md:"flex"},borderBottom:"1px solid #ccc",p:1},children:[(0,t.jsx)(d.Z,{sx:{width:"15rem"},children:(0,t.jsx)(x.Z,{variant:"text",children:"อีเมล:"})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(x.Z,{variant:"data",children:B})})]}),(0,t.jsxs)(m.ZP,{item:!0,xs:12,sx:{display:{md:"flex"},borderBottom:"1px solid #ccc",p:1},children:[(0,t.jsx)(d.Z,{sx:{width:"15rem"},children:(0,t.jsx)(x.Z,{variant:"text",children:"ที่อยู่:"})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(x.Z,{variant:"data",children:k.address+" ตำบล "+k.tambon+" อำเภอ "+k.amphure+" จังหวัด "+k.province})})]}),(0,t.jsxs)(m.ZP,{item:!0,xs:12,sx:{display:{md:"flex"},borderBottom:"1px solid #ccc",p:1},children:[(0,t.jsx)(d.Z,{sx:{width:"15rem"},children:(0,t.jsx)(x.Z,{variant:"text",children:"ตำแหน่ง:"})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(x.Z,{variant:"data",children:""===D?"ยังไม่กำหนด":D})})]}),(0,t.jsxs)(m.ZP,{item:!0,xs:12,sx:{display:{md:"flex"},borderBottom:"1px solid #ccc",p:1},children:[(0,t.jsx)(d.Z,{sx:{width:"15rem"},children:(0,t.jsx)(x.Z,{variant:"text",children:"เงินเดือน:"})}),(0,t.jsx)(d.Z,{children:(0,t.jsx)(x.Z,{variant:"data",children:""===N?"ยังไม่กำหนด":A})})]}),(0,t.jsxs)(m.ZP,{item:!0,xs:12,sx:{display:{md:"flex"},mt:2,p:1},children:[!T&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(h.Z,{variant:"contained",color:"success",onClick:V,sx:{m:1},children:"แก้ไข"}),(0,t.jsx)(h.Z,{variant:"contained",color:"error",sx:{m:1},onClick:()=>{es(!0)},children:"เลิกจ้าง"})]}),T&&(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(h.Z,{variant:"contained",color:"success",onClick:V,sx:{m:1},children:"จ้างใหม่"})})]})]})})]})]})}}},function(e){e.O(0,[2607,7609,5675,6298,6185,1283,3717,3914,8360,8271,4163,4792,4962,9913,9774,2888,179],function(){return e(e.s=29366)}),_N_E=e.O()}]);