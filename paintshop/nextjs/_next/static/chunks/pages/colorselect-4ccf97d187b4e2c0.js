(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1875],{90418:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/colorselect",function(){return o(50429)}])},59741:function(e,t){"use strict";t.Z={src:"/_next/static/media/Logo.6eb3998a.png",height:500,width:500,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAAtklEQVR42mMAgX+rUxgZkMDXPX5McM7/ZRFgyT/7/KW+tlux/GdgEGdAB/8PxLP+3x449/++TK33u4ue/p8QNgls8mk+iEm/z2/T+rFjwf+Py5enxpx/OuHeior//6Vc9RAmeBaIP5pX8L9s74UNDJvutV+ZVfb/v020CVjy09ZcZrCiCf6ND5aX/b8KlPxXnDwXJPbgLAMjqlsY3DX/G0cbIPgTGBGSu/TgXnt8jIHxP0M/WBIArFFPt28L8gwAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}},17576:function(e,t,o){"use strict";o.d(t,{Z:function(){return X}});var r=o(85893),n=o(67294),l=o(66720),a=o(65582),i=o(68239),s=o(22430),c=o(2734),d=o(98396),h=o(42293),u=o(10155),x=o(83321),g=o(93946),p=o(69661),f=o(35294),j=o(4178),Z=o(15861),m=o(77533),b=o(78462),y=o(76113),w=o(48885),A=o(59334),v=o(326);let k=["หน้าแรก","ผลิตภัณฑ์","ออกแบบ"];var C=()=>{let[e,t]=n.useState(!1);return(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(m.ZP,{anchor:"left",open:e,onClose:()=>t(!1),children:(0,r.jsx)(b.Z,{children:k.map((e,t)=>(0,r.jsx)(y.Z,{children:(0,r.jsx)(w.Z,{children:(0,r.jsx)(A.Z,{children:e})})},t))})}),(0,r.jsx)(g.Z,{sx:{color:"black"},onClick:()=>t(!e),children:(0,r.jsx)(v.Z,{color:"white"})})]})},E=o(87357),D=o(59741),_=o(25675),P=o.n(_),S=o(41664),I=o.n(S),F=o(42761),N=o(46624),T=o(9669),J=o(50838),L=o(39332),O=o(49925);let U=["โปรไฟล์","ออกจากระบบ"];function R(){let[e,t]=n.useState(null),{role:o,user:l}=(0,J.Eu)();"admin"==o?(U=["โปรไฟล์","แดชบอร์ด","ออกจากระบบ"],console.log(l)):"employee"==o?(U=["โปรไฟล์","แดชบอร์ด","ออกจากระบบ"],console.log(l)):(U=["โปรไฟล์","ออกจากระบบ"],console.log(l));let[a,m]=n.useState(""),[b,y]=n.useState(null),[w,A]=n.useState(null);n.useEffect(()=>{v()},[]);let v=async()=>{let e=l.uid,{result:o,error:r}=await (0,O.PR)("users",e);if(r)console.error("Error fetching collection:",r);else{let e=o.docs.map(e=>({id:e.id,name:e.data().name,email:e.data().email,tel:e.data().tel,img:e.data().profileUrl}));t(e)}},k=(0,T.v0)(),_=async()=>{try{await (0,T.w7)(k),console.log("User signed out")}catch(e){console.error("An error occurred while signing out:",e)}},S=(0,L.useRouter)(),R=e=>{"ออกจากระบบ"==e?_():"โปรไฟล์"==e?S.push("/account/profile"):"แดชบอร์ด"==e&&("admin"==o?S.push("/dashboard"):S.push("/product"))};console.log("ทดสอบpath",S.pathname),n.useEffect(()=>{m(S.pathname)},[S.pathname]);let X=(0,c.Z)();console.log(X);let M=(0,d.Z)(X.breakpoints.down("md"));console.log(M);let W=(0,i.Z)({typography:{fontFamily:"Prompt",fontSize:18},palette:{primary:{main:"#ffffff"}}});console.log("Current Path:",a);let B={Box:{transition:"0.1s","&:hover":{transition:"0.1s",color:"#018294"}},activeLink:{fontWeight:"bold",color:"#018294"}};return(0,r.jsx)(s.Z,{theme:W,children:(0,r.jsx)(h.Z,{position:"static",sx:{background:"white"},children:(0,r.jsxs)(u.Z,{children:[(0,r.jsx)(P(),{src:D.Z,alt:"logo",style:{objectFit:"cover",width:"4vw",height:"100%"},sx:{display:{xs:"flex",md:"none"},mr:1}}),M?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(C,{})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(I(),{style:{color:"black"},href:"/homepage",passHref:!0,onClick:e=>m("/homepage"),children:(0,r.jsx)(E.Z,{sx:"/homepage"===a?B.activeLink:B.Box,children:(0,r.jsx)(x.Z,{color:"inherit",children:"หน้าแรก"})})}),(0,r.jsx)(I(),{style:{color:"black"},href:"/catalog",passHref:!0,onClick:e=>m("/catalog"),children:(0,r.jsx)(E.Z,{sx:"/catalog"===a?B.activeLink:B.Box,children:(0,r.jsx)(x.Z,{color:"inherit",children:"ผลิตภัณฑ์"})})}),(0,r.jsx)(g.Z,{color:"black",sx:{marginLeft:"auto"},children:(0,r.jsx)(F.Z,{})}),(0,r.jsx)(I(),{href:"/cart",children:(0,r.jsx)(g.Z,{color:"black",children:(0,r.jsx)(N.Z,{})})}),(0,r.jsx)(g.Z,{onClick:e=>{A(e.currentTarget)},sx:{p:0},children:e&&e.map((e,t)=>(0,r.jsx)(E.Z,{children:(0,r.jsx)(p.Z,{src:e.img,alt:"profile",sx:{width:32,height:32,ml:1}})},t))}),(0,r.jsx)(f.Z,{sx:{mt:"45px"},id:"menu-appbar",anchorEl:w,anchorOrigin:{vertical:"top",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:!!w,onClose:()=>{A(null)},children:U.map(e=>(0,r.jsx)(j.Z,{onClick:()=>R(e),children:(0,r.jsx)(Z.Z,{textAlign:"center",children:e})},e))})]})]})})})}function X(e){let{children:t}=e,{user:o,isAdmin:i}=(0,J.Eu)(),s=(0,L.useRouter)();return n.useEffect(()=>{null==o&&s.push("/")},[o]),(0,r.jsxs)(n.Fragment,{children:[(0,r.jsx)(l.ZP,{}),(0,r.jsxs)(a.Z,{maxWidth:"sx",sx:{bgcolor:"#FAF8F1"},style:{padding:"0px"},children:[(0,r.jsx)(R,{}),t]})]})}},49925:function(e,t,o){"use strict";o.d(t,{EC:function(){return s},Eq:function(){return d},KL:function(){return c},PR:function(){return h},ZP:function(){return a},_N:function(){return i},wv:function(){return u}});var r=o(11802),n=o(36100);let l=(0,n.ad)(r.Z);async function a(e,t){let o=(0,n.JU)(l,e,t);try{let e=await (0,n.QT)(o);return{result:e,error:null}}catch(e){return{result:null,error:e}}}let i=async e=>{let t=await (0,n.PL)((0,n.hJ)(l,e));return{result:t,error:null}},s=async(e,t)=>{let o=(0,n.JU)(l,"catalog",t),r=(0,n.IO)((0,n.hJ)(l,e),(0,n.ar)("catalog_id","==",o)),a=await (0,n.PL)(r);return{result:a,error:null}},c=async e=>{let t=[];for(let o of e){let e=await (0,n.QT)((0,n.JU)(l,"products",o));if(e.exists()){let r=e.data(),n={id:o,...r};t.push(n)}}return t},d=async e=>{let t=[];for(let o of e){let e=await (0,n.QT)((0,n.JU)(l,"colors",o));if(e.exists()){let r=e.data(),n={id:o,...r};t.push(n)}}return t},h=async(e,t)=>{let o=(0,n.IO)((0,n.hJ)(l,e),(0,n.ar)("uid","==",String(t))),r=await (0,n.PL)(o);return r.forEach(e=>{console.log(e.id," => ",e.data())}),{result:r,error:null}},u=async(e,t)=>{let o=(0,n.JU)(l,"catalog",t),r=await (0,n.QT)(o);if(!r.exists())return console.error("Catalog document not found"),{result:null,error:"Catalog document not found"};let a=(0,n.IO)((0,n.hJ)(l,e),(0,n.ar)("catalog_id","==",o));try{let e=await (0,n.PL)(a);return e.forEach(e=>{console.log(e.id," => ",e.data())}),{result:e,error:null}}catch(e){return console.error("Error getting products: ",e),{result:null,error:e}}}},50429:function(e,t,o){"use strict";o.r(t),o.d(t,{default:function(){return v}});var r=o(85893),n=o(67294),l=o(87357),a=o(65582),i=o(12963),s=o(15861),c=o(83321),d=o(11703),h=o(40044),u=o(86886),x=o(66242),g=o(9974),p=o(44267),f=o(17576),j=o(96471),Z=o(41664),m=o.n(Z),b=o(11163),y=o(49925),w=o(68239),A=o(22430);function v(){let[e,t]=n.useState(0),o=(0,b.useRouter)(),[Z,v]=n.useState(null),[k,C]=n.useState(null),[E,D]=n.useState(null),_=JSON.parse(o.query.catalogData),P=JSON.parse(o.query.productId);n.useEffect(()=>{I(),S()},[]),n.useEffect(()=>{E&&E.length>0&&(t(0),C(E[0].id))},[E]),n.useEffect(()=>{console.log(Z),console.log(E)},[Z,E]);let S=async()=>{let{result:e,error:t}=await (0,y._N)("colorshade");if(t)console.error("Error fetching collection:",t);else{let t=[];e.forEach(e=>{console.log("Colorshade ID:",e.id),console.log("Colorshade data:",e.data()),t.push({id:e.id,...e.data()})}),console.log(t),D(t)}},I=async()=>{if(_){console.log("Fetching data for catalogId:",_);let{result:e,error:t}=await (0,y._N)("colors",{where:{catalog_id:_}});if(t)console.error("Error fetching collection:",t);else{let t=[];e.forEach(e=>{console.log("Document ID:",e.id);let o=e.data().catalog_id.id;if(console.log(_),o===_){console.log("Matching color:",e.data());let o={id:e.id,...e.data()};if(e.data().colorshade_id){let t=e.data().colorshade_id.id;o.colorshade_id=t}console.log(o),t.push(o)}}),console.log(t),v(t)}}},F=(0,w.Z)({components:{MuiTabs:{styleOverrides:{flexContainer:{alignItems:"center"}},indicator:{backgroundColor:"transparent",display:"none"}}}}),N={tab:{width:"80px",height:"90px",boxShadow:"none",transition:"width 0.2s, height 0.2s, box-shadow 0.2s"},activeTab:{width:"100px",height:"110px",border:"none",boxShadow:"4px 0px 4px 0px rgba(0, 0, 0, 0.25)",zIndex:"1"}};return(0,r.jsx)(f.Z,{children:(0,r.jsx)(A.Z,{theme:F,children:(0,r.jsxs)(l.Z,{sx:{width:"100%",height:"40vh"},children:[(0,r.jsx)(a.Z,{maxWidth:"false",sx:{display:"flex",justifyContent:"center",bgcolor:"#FAF8F1"},children:(0,r.jsxs)(l.Z,{sx:{width:"70vw",pt:2,pb:2},children:[(0,r.jsx)("div",{role:"presentation",onClick:function(e){e.preventDefault(),console.info("You clicked a breadcrumb.")},children:(0,r.jsxs)(i.Z,{"aria-label":"Beger",children:[(0,r.jsx)(m(),{style:{textDecoration:"none",color:"inherit"},sx:{color:"inherit","&:hover":{textDecoration:"underline"}},href:"/homepage",children:"หน้าแรก"}),(0,r.jsx)(m(),{style:{textDecoration:"none",color:"inherit"},sx:{color:"inherit","&:hover":{textDecoration:"underline"}},href:"/catalog",children:"แคตตาล็อก"}),(0,r.jsx)(m(),{style:{textDecoration:"none",color:"inherit"},sx:{color:"inherit","&:hover":{textDecoration:"underline"}},href:"/productpage?catalogData=".concat(o.query.catalogData),children:"ผลิตภัณฑ์"}),(0,r.jsx)(s.Z,{color:"text.primary",children:"เลือกสี"})]})}),(0,r.jsx)(m(),{style:{textDecoration:"none"},sx:{color:"inherit","&:hover":{textDecoration:"underline"}},href:"/productpage?catalogData=".concat(o.query.catalogData),children:(0,r.jsx)(l.Z,{sx:{pt:2},children:(0,r.jsxs)(c.Z,{sx:{color:"#018294",bgcolor:"white",fontWeight:"bold",borderRadius:"50px",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)"},children:[(0,r.jsx)(j.Z,{}),(0,r.jsx)(s.Z,{children:" ย้อนกลับ"})]})})})]})}),(0,r.jsx)(a.Z,{maxWidth:!1,sx:{display:"flex",justifyContent:"center",bgcolor:"white"},children:(0,r.jsxs)(l.Z,{sx:{p:3,width:"70vw"},children:[(0,r.jsx)(s.Z,{variant:"h4",sx:{pb:2,color:"#018294",textAlign:"center"},children:"เฉดสี"}),(0,r.jsx)(d.Z,{value:e,onChange:(e,o)=>{t(o)},centered:!0,"aria-label":"basic tabs example",sx:{p:2,"& .css-1aquho2-MuiTabs-indicator":{display:"none"}},children:E&&E.map((o,n)=>(0,r.jsx)(h.Z,{sx:{...N.tab,backgroundColor:o.code,...e===n?N.activeTab:{}},onClick:()=>{console.log("Tab Clicked with Index and ID:",n,o.id),t(n),C(o.id)}},n))}),(0,r.jsx)(l.Z,{sx:{p:3},children:(0,r.jsx)(u.ZP,{container:!0,spacing:2,children:Z&&Z.map(e=>(0,r.jsx)(u.ZP,{item:!0,xs:12,sm:6,md:2,sx:{display:e.colorshade_id===k?"":"none"},children:k&&e.colorshade_id===k?(0,r.jsx)(x.Z,{sx:{maxWidth:300},onClick:()=>{var t;return t=e.id,void o.push({pathname:"/productsdetail/",query:{catalogData:JSON.stringify(_),productId:JSON.stringify(P),colorId:JSON.stringify(t)}})},children:(0,r.jsx)(g.Z,{children:(0,r.jsxs)(p.Z,{sx:{backgroundColor:e.code,height:150},children:[(0,r.jsx)(s.Z,{children:e.code_name}),(0,r.jsx)(s.Z,{children:e.name})]})})}):(0,r.jsx)(x.Z,{sx:{maxWidth:300,display:"none"},children:(0,r.jsx)(g.Z,{children:(0,r.jsx)(p.Z,{})})})},e.id))})})]})})]})})})}}},function(e){e.O(0,[2607,9078,7393,6298,6886,505,3717,3914,7451,7591,2754,9774,2888,179],function(){return e(e.s=90418)}),_N_E=e.O()}]);