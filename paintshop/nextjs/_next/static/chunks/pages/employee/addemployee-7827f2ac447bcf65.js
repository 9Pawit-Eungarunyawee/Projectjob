(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1858],{73182:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/employee/addemployee",function(){return r(93963)}])},53233:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(11802),i=r(36100);let s=(0,i.ad)(n.Z);async function a(e,t,r){let n=null,a=null;if(r.catalog_id){let e=(0,i.JU)(s,"catalog",r.catalog_id);r.catalog_id=e}try{n=await (0,i.pl)((0,i.JU)(s,e,t),r,{merge:!0}),console.log("แก้ไขสำเร็จ",n)}catch(e){console.error("เกิดข้อผิดพลาดในการแก้ไขข้อมูล:",a=e)}return{result:n,error:a}}},726:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(36100),i=r(11802);let s=(0,n.ad)(i.Z);async function a(e,t,r){try{let i=t.toLowerCase(),a=r.toLowerCase(),l=(0,n.IO)((0,n.hJ)(s,e),(0,n.Xo)(i)),o=await (0,n.PL)(l),c=o.docs.filter(e=>{let t=e.data()[i];return t&&-1!==t.toLowerCase().indexOf(a)}).map(e=>({id:e.id,...e.data()}));return c}catch(e){throw console.error("Error searching data:",e),e}}},7355:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var n=r(85893),i=r(53233),s=r(11463),a=r(46901),l=r(58703),o=r(50657),c=r(37645),d=r(6514),u=r(15861),h=r(98271),x=r(4178),m=r(31425),Z=r(83321),f=r(67294);function p(e){let{item:t,open:r,handleClose:p,style:j,debouncedSearchUser:g}=e,[y,v]=(0,f.useState)(""),[b,w]=(0,f.useState)(""),C=async e=>{let t=await (0,i.Z)("users",e,{role:"employee",salary:y,position:b,isFormerEmployee:!1});t?(_((0,n.jsx)(a.Z,{severity:"success",onClose:W,children:"แก้ไข้ข้อมูลสำเร็จ"})),E(!0)):(_((0,n.jsx)(a.Z,{severity:"error",onClose:W,children:"ผิดพลาด! ไม่สามารถแก้ไข้ข้อมูลได้"})),E(!0)),g(""),p(),W()},[S,_]=(0,f.useState)(null),[k,E]=(0,f.useState)(!1),W=(e,t)=>{"clickaway"!==t&&E(!1)};return(0,n.jsxs)(s.a,{theme:j,children:[(0,n.jsx)(l.Z,{open:k,autoHideDuration:6e3,onClose:W,children:S}),(0,n.jsxs)(o.Z,{open:r,onClose:p,maxWidth:"xs",fullWidth:!0,children:[(0,n.jsx)(c.Z,{children:"เพิ่มพนักงาน"}),(0,n.jsxs)(d.Z,{children:[(0,n.jsxs)(u.Z,{variant:"body2",children:["ชื่อ: ",t.name]}),(0,n.jsxs)(u.Z,{variant:"body2",children:["อีเมล: ",t.email]}),(0,n.jsxs)(u.Z,{variant:"body2",children:["เบอร์ติดต่อ: ",t.tel]}),(0,n.jsxs)(h.Z,{value:b,onChange:e=>w(e.target.value),size:"small",fullWidth:!0,select:!0,label:"ตำแหน่ง",sx:{mt:1,mb:1},required:!0,children:[(0,n.jsx)(x.Z,{value:"รับลูกค้า",children:"รับลูกค้า"}),(0,n.jsx)(x.Z,{value:"จัดการคลังสินค้า",children:"จัดการคลังสินค้า"})]}),(0,n.jsx)(h.Z,{variant:"outlined",label:"เงินเดือน",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>{let t=e.target.value;(/^\d*$/.test(t)||""===t)&&(""===t||parseInt(t)>0&&"0"!==t[0])&&v(t)},value:String(y)})]}),(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(Z.Z,{variant:"contained",color:"error",onClick:p,children:"ยกเลิก"}),(0,n.jsx)(Z.Z,{variant:"contained",color:"success",onClick:()=>C(t.id),children:"เพิ่ม"})]})]})]})}},93963:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return C}});var n=r(85893),i=r(9913),s=r(68239),a=r(22430),l=r(87357),o=r(15861),c=r(83321),d=r(86886),u=r(98271),h=r(87109),x=r(66242),m=r(9974),Z=r(83965),f=r(44267),p=r(96471),j=r(67294),g=r(42761),y=r(23279),v=r.n(y),b=r(726),w=r(7355);function C(){let e=(0,s.Z)({palette:{primary:{main:"#018294"},success:{main:"#A9C470"},error:{main:"#FE616A"}},typography:{text:{fontSize:"1.2rem",padding:"1vw",width:"10rem"},data:{fontSize:"1.2rem",fontWeight:"600",whiteSpace:"pre-line"}}});(0,j.useEffect)(()=>{k("")},[]);let[t,r]=(0,j.useState)([]),[y,C]=(0,j.useState)(""),[S,_]=(0,j.useState)([]),k=v()(async e=>{try{let t=await (0,b.Z)("users","name",e),r=t.filter(e=>"user"==e.role&&!e.isFormerEmployee);_(r)}catch(e){console.error("Error searching data:",e)}},100),E=e=>{C(e),k(e)},[W,z]=(0,j.useState)(!1),P=e=>{z(!0),r(e)},N=()=>{z(!1)};return(0,n.jsx)(i.Z,{children:(0,n.jsx)(a.Z,{theme:e,children:(0,n.jsxs)(l.Z,{children:[(0,n.jsx)(o.Z,{sx:{fontSize:"2rem",fontWeight:"600",mt:5},children:"เพิ่มพนักงาน"}),(0,n.jsxs)(c.Z,{sx:{color:"#018294",bgcolor:"white",fontWeight:"bold",borderRadius:"50px",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)"},onClick:()=>{window.history.back()},children:[(0,n.jsx)(p.Z,{}),(0,n.jsx)(o.Z,{children:" ย้อนกลับ"})]}),(0,n.jsx)(l.Z,{sx:{mt:3,mb:5,backgroundColor:"#fff",p:2,borderRadius:"10px",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)",minHeight:"70vh"},children:(0,n.jsxs)(d.ZP,{container:!0,spacing:1,children:[(0,n.jsx)(d.ZP,{item:!0,xs:12,children:(0,n.jsx)(u.Z,{label:"ค้นหาผู้ใช้งาน",variant:"outlined",size:"small",fullWidth:!0,onChange:e=>E(e.target.value),InputProps:{startAdornment:(0,n.jsx)(h.Z,{position:"start",children:(0,n.jsx)(g.Z,{sx:{fontSize:"1.4rem"}})})}})}),S&&S.map(r=>(0,n.jsxs)(d.ZP,{item:!0,xs:12,md:4,lg:3,sx:{mt:2},children:[(0,n.jsx)(w.default,{item:t,open:W,handleClose:N,style:e,debouncedSearchUser:k}),(0,n.jsx)(x.Z,{onClick:()=>P(r),children:(0,n.jsxs)(m.Z,{children:[(0,n.jsx)(Z.Z,{component:"img",height:"140",image:r.profileUrl,alt:"profile-img"}),(0,n.jsxs)(f.Z,{children:[(0,n.jsx)(o.Z,{gutterBottom:!0,variant:"h5",component:"div",children:r.name}),(0,n.jsxs)(o.Z,{variant:"body2",color:"text.secondary",children:["อีเมล: ",r.email]}),(0,n.jsxs)(o.Z,{variant:"body2",color:"text.secondary",children:["เบอร์ติดต่อ: ",r.tel]})]})]})})]},r.id))]})})]})})})}}},function(e){e.O(0,[2607,7609,5675,6298,6185,1283,3717,3914,8360,8271,4163,4792,4133,9913,9774,2888,179],function(){return e(e.s=73182)}),_N_E=e.O()}]);