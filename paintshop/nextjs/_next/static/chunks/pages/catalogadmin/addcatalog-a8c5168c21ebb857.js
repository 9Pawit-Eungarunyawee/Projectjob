(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8787],{67426:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/catalogadmin/addcatalog",function(){return l(25414)}])},94521:function(e,t,l){"use strict";l.d(t,{Y:function(){return i},_:function(){return s}});var n=l(11802),o=l(36100),r=l(49925);let a=(0,o.ad)(n.Z);async function s(e,t){let l=null,n=null;try{let n=await (0,r.ZP)("users",t.user_id);if(n.result&&n.result.exists){let r=n.result.data().name,s={delete:{deleteAt:(0,o.Bt)(),deleteBy:r}};l=await (0,o.pl)((0,o.JU)(a,e,t.id),s,{merge:!0}),console.log("Soft delete สำเร็จ",l)}else console.log("หาข้อมูล user ใน soft del ไม่เจอ")}catch(e){console.error("เกิดข้อผิดพลาดในการ soft delete:",n=e)}return{result:l,error:n}}async function i(e,t){let l=null,n=null;try{l=await (0,o.pl)((0,o.JU)(a,e,t),{delete:null},{merge:!0}),console.log("restoreCatalog สำเร็จ",l)}catch(e){console.error("เกิดข้อผิดพลาดในการ restoreCatalog:",n=e)}return{result:l,error:n}}},84178:function(e,t,l){"use strict";l.d(t,{Lj:function(){return s},ZP:function(){return a},iU:function(){return i}});var n=l(11802),o=l(36100);let r=(0,o.ad)(n.Z);async function a(e,t){let l=null,n=null;try{let n=(0,o.JU)(r,"catalog",t.catalog_id),a=(0,o.JU)(r,"colorshade",t.colorshade_id),s={catalog_id:n,colorshade_id:a,name:t.name,code:t.code,code_name:t.codename};l=await (0,o.ET)((0,o.hJ)(r,e),s),console.log("เพิ่มข้อมูลสีสำเร็จ",l)}catch(e){console.error("เกิดข้อผิดพลาดในการเพิ่มข้อมูลสี:",n=e)}return{result:l,error:n}}async function s(e,t,l){let n=null,a=null;try{let a=(0,o.JU)(r,"colorshade",l.colorshade_id),s={colorshade_id:a,name:l.name,code:l.code,code_name:l.code_name};n=await (0,o.pl)((0,o.JU)(r,e,t),s,{merge:!0}),console.log("แก้ไขสำเร็จ",n)}catch(e){console.error("เกิดข้อผิดพลาดในการแก้ไขข้อมูล:",a=e)}return{result:n,error:a}}let i=async(e,t)=>{let l=null,n=null,a=(0,o.JU)(r,e,t);try{await (0,o.oe)(a),console.log("ลบข้อมูลสำเร็จ"),l="Success"}catch(e){console.error("เกิดข้อผิดพลาดในการลบข้อมูล:",n=e)}return{result:l,error:n}}},25414:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return _}});var n=l(85893),o=l(9913),r=l(94521);l(84178);var a=l(49925),s=l(68239),i=l(46901),c=l(22430),d=l(58703),u=l(87357),h=l(15861),m=l(83321),x=l(86886),f=l(98271),g=l(23279),p=l.n(g),j=l(25675),Z=l.n(j),b=l(67294),w=l(96471);function _(){let e=(0,s.Z)({palette:{primary:{main:"#018294"},success:{main:"#A9C470"},error:{main:"#FE616A"}}}),[t,l]=(0,b.useState)(""),[g,j]=(0,b.useState)(""),[_,y]=(0,b.useState)(""),[S,v]=(0,b.useState)(!1),[C,U]=(0,b.useState)(null),[E,k]=(0,b.useState)("#fff"),[J,N]=(0,b.useState)([]),[P,A]=(0,b.useState)([]),[F,R]=(0,b.useState)(""),[W,z]=(0,b.useState)(""),[D,T]=(0,b.useState)(""),[q,B]=(0,b.useState)("");(0,b.useEffect)(()=>{L()},[]);let L=async()=>{let{result:e,error:t}=await (0,a._N)("colorshade");if(t)console.error("Error fetching document:",t);else if(e){let t=e.docs.map(e=>({id:e.id,name:e.data().name,code:e.data().code}));N(t),k(t[0].code)}};p()(e=>{z(e)},500);let O=(e,t)=>{"clickaway"!==t&&v(!1)},X=async e=>{e.preventDefault();let l=await (0,r.default)("catalog",{name:t,img:g,detail:_});l?(U((0,n.jsx)(i.Z,{severity:"success",onClose:O,children:"เพิ่มข้อมูลสำเร็จ"})),v(!0)):(U((0,n.jsx)(i.Z,{severity:"error",onClose:O,children:"ผิดพลาด! ไม่สามารถเพิ่มข้อมูลได้"})),v(!0))};return(0,n.jsx)(o.Z,{children:(0,n.jsxs)(c.Z,{theme:e,children:[(0,n.jsx)(d.Z,{open:S,autoHideDuration:6e3,onClose:O,children:C}),(0,n.jsxs)(u.Z,{sx:{height:"100%",width:"100%",mt:5},children:[(0,n.jsx)(h.Z,{sx:{fontSize:"2rem",fontWeight:"600"},children:"เพิ่มแค็ตตาล็อก"}),(0,n.jsxs)(m.Z,{sx:{color:"#018294",bgcolor:"white",fontWeight:"bold",borderRadius:"50px",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)"},onClick:()=>{window.history.back()},children:[(0,n.jsx)(w.Z,{}),(0,n.jsx)(h.Z,{children:" ย้อนกลับ"})]}),(0,n.jsx)("form",{onSubmit:X,className:"form",children:(0,n.jsxs)(x.ZP,{container:!0,spacing:0,sx:{mt:3,mb:5,backgroundColor:"#fff",p:2,borderRadius:"10px",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)"},children:[(0,n.jsxs)(x.ZP,{item:!0,xs:12,sm:7,children:[(0,n.jsx)(h.Z,{sx:{mt:1},children:"ชื่อแค็ตตาล็อก:"}),(0,n.jsx)(f.Z,{variant:"outlined",value:t,label:"ชื่อแคตตาล็อก",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>l(e.target.value)}),(0,n.jsx)(h.Z,{sx:{mt:1},children:"รายละเอียดแค็ตตาล็อก:"}),(0,n.jsx)(f.Z,{value:_,onChange:e=>y(e.target.value),variant:"outlined",label:"รายละเอียดแค็ตตาล็อก",fullWidth:!0,required:!0,rows:4,multiline:!0,size:"small",sx:{mt:1,mb:1}}),(0,n.jsxs)(u.Z,{sx:{textAlign:"left"},children:[(0,n.jsx)(h.Z,{sx:{mb:1},children:"รูปแค็ตตาล็อก:"}),(0,n.jsx)(u.Z,{children:g&&(0,n.jsx)(Z(),{src:g,alt:"Uploaded Image",priority:!0,height:"200",width:"260",style:{border:"1px solid rgba(0, 0, 0, 0.50)",objectFit:"cover"}})}),(0,n.jsxs)("label",{htmlFor:"upload-image",children:[(0,n.jsx)(m.Z,{variant:"contained",component:"span",children:"เพิ่มรูปภาพแคตตาล็อก"}),(0,n.jsx)("input",{id:"upload-image",hidden:!0,accept:"image/*",type:"file",onChange:e=>{let t=e.target.files[0];if(!t){console.error("No file selected."),j("");return}let l=new FileReader;l.onloadend=()=>{j(l.result)},l.readAsDataURL(t)}})]})]})]}),(0,n.jsx)(x.ZP,{item:!0,xs:12,children:(0,n.jsx)(m.Z,{variant:"contained",color:"success",sx:{mr:2,mb:2,mt:2},type:"submit",children:"เพิ่ม"})})]})})]})]})})}}},function(e){e.O(0,[2607,7609,5675,6298,6185,1283,3717,3914,8360,8271,4792,4909,9913,9774,2888,179],function(){return e(e.s=67426)}),_N_E=e.O()}]);