(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8787],{67426:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/catalogadmin/addcatalog",function(){return t(25414)}])},25414:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return _}});var r=t(85893),a=t(98010),i=t(94521),l=t(84178),o=t(49925),n=t(68239),d=t(46901),c=t(22430),x=t(58703),h=t(87357),m=t(15861),u=t(86886),p=t(10945),g=t(83321),j=t(34386),f=t(23279),Z=t.n(f),b=t(25675),v=t.n(b),w=t(67294);function _(){let e=(0,n.Z)({palette:{primary:{main:"#018294"},success:{main:"#A9C470"},error:{main:"#FE616A"}}}),[s,t]=(0,w.useState)(""),[f,b]=(0,w.useState)(""),[_,C]=(0,w.useState)(""),[y,S]=(0,w.useState)(!1),[R,E]=(0,w.useState)(null),[k,F]=(0,w.useState)("#fff"),[N,z]=(0,w.useState)([]),[A,P]=(0,w.useState)([]),[D,W]=(0,w.useState)(""),[B,G]=(0,w.useState)(""),[T,q]=(0,w.useState)(""),[O,U]=(0,w.useState)("");(0,w.useEffect)(()=>{X()},[]);let X=async()=>{let{result:e,error:s}=await (0,o._N)("colorshade");if(s)console.error("Error fetching document:",s);else if(e){let s=e.docs.map(e=>({id:e.id,name:e.data().name,code:e.data().code}));z(s),F(s[0].code)}},H=async()=>{let{result:e,error:s}=await getColors("colors",catalog_id);if(s)console.error("Error fetching colors:",s);else if(e){let s=e.docs.map(e=>({id:e.id,name:e.data().name,code:e.data().code,codename:e.data().code_name,catalog_id:e.data().catalog_id.id}));P(s)}},I=Z()(e=>{G(e)},500),L=(e,s)=>{"clickaway"!==s&&S(!1)},M=async e=>{e.preventDefault();let t=await (0,i.Z)("catalog",{name:s,img:f,detail:_});t?(E((0,r.jsx)(d.Z,{severity:"success",onClose:L,children:"เพิ่มข้อมูลสำเร็จ"})),S(!0)):(E((0,r.jsx)(d.Z,{severity:"error",onClose:L,children:"ผิดพลาด! ไม่สามารถเพิ่มข้อมูลได้"})),S(!0))},$=(e,s)=>{W(e),F(s),console.log(D)},J=async e=>{if(e.preventDefault(),console.log("colordata:",s,B,O,catalog_id,D),""===D){E((0,r.jsx)(d.Z,{severity:"error",onClose:L,children:"กรุณาเลือกเฉดสีก่อนเพิ่มสี"})),S(!0);return}let t=/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(B);if(!t){E((0,r.jsx)(d.Z,{severity:"error",onClose:L,children:"กรุณากรอกโค้ดสีให้ถูกต้อง"})),S(!0);return}if(""!==T&&""!==B&&""!==O&&catalog_id&&D){let e={catalog_id:catalog_id,code:B,codename:O,colorshade_id:D,name:T},s=await (0,l.Z)("colors",e);G(""),U(""),q(""),s?(E((0,r.jsx)(d.Z,{severity:"success",onClose:L,children:"เพิ่มสีสำเร็จ"})),S(!0),H()):(E((0,r.jsx)(d.Z,{severity:"error",onClose:L,children:"ผิดพลาด! ไม่สามารถเพิ่มสีได้"})),S(!0))}};return(0,r.jsx)(a.Z,{children:(0,r.jsxs)(c.Z,{theme:e,children:[(0,r.jsx)(x.Z,{open:y,autoHideDuration:6e3,onClose:L,children:R}),(0,r.jsxs)(h.Z,{sx:{height:"100%",width:"100%",mt:5},children:[(0,r.jsx)(m.Z,{sx:{fontSize:"2rem",fontWeight:"600"},children:"เพิ่มแค็ตตาล็อก"}),(0,r.jsx)("form",{onSubmit:M,className:"form",children:(0,r.jsxs)(u.ZP,{container:!0,spacing:0,sx:{mt:3,mb:5,backgroundColor:"#fff",p:2,borderRadius:"10px",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)"},children:[(0,r.jsxs)(u.ZP,{item:!0,xs:12,sm:7,children:[(0,r.jsx)(m.Z,{sx:{mt:1},children:"ชื่อแค็ตตาล็อก:"}),(0,r.jsx)(p.Z,{variant:"outlined",value:s,label:"ชื่อแคตตาล็อก",fullWidth:!0,required:!0,size:"small",sx:{mt:1,mb:1},onChange:e=>t(e.target.value)}),(0,r.jsx)(m.Z,{sx:{mt:1},children:"รายละเอียดแค็ตตาล็อก:"}),(0,r.jsx)(p.Z,{value:_,onChange:e=>C(e.target.value),variant:"outlined",label:"รายละเอียดแค็ตตาล็อก",fullWidth:!0,required:!0,rows:4,multiline:!0,size:"small",sx:{mt:1,mb:1}}),(0,r.jsxs)(h.Z,{sx:{textAlign:"left"},children:[(0,r.jsx)(m.Z,{sx:{mb:1},children:"รูปแค็ตตาล็อก:"}),(0,r.jsx)(h.Z,{children:f&&(0,r.jsx)(v(),{src:f,alt:"Uploaded Image",priority:!0,height:"200",width:"260",style:{border:"1px solid rgba(0, 0, 0, 0.50)",objectFit:"cover"}})}),(0,r.jsxs)("label",{htmlFor:"upload-image",children:[(0,r.jsx)(g.Z,{variant:"contained",component:"span",children:"เพิ่มรูปภาพแคตตาล็อก"}),(0,r.jsx)("input",{id:"upload-image",hidden:!0,accept:"image/*",type:"file",onChange:e=>{let s=e.target.files[0];if(!s){console.error("No file selected."),b("");return}let t=new FileReader;t.onloadend=()=>{b(t.result)},t.readAsDataURL(s)}})]})]}),(0,r.jsx)(m.Z,{sx:{mt:1},children:"เพิ่มสี:"}),(0,r.jsxs)(h.Z,{sx:{ml:2},children:[(0,r.jsxs)(h.Z,{children:[(0,r.jsx)(m.Z,{sx:{mt:1},children:"เฉดสี:"}),(0,r.jsx)(h.Z,{sx:{width:"10rem",height:"3rem",bgcolor:k,transition:"0.2s",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.20)",mb:2,borderRadius:"5px"}}),(0,r.jsx)(h.Z,{sx:{display:"flex"},children:N&&N.map(e=>(0,r.jsx)(h.Z,{onClick:()=>$(e.id,e.code),sx:{bgcolor:e.code,width:"2rem",height:"3rem",transform:e.id==D?"scale(1.2)":"scale(1)",cursor:"pointer",borderRadius:"100px",transition:"0.2s",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)",m:1,":hover":{transform:"scale(1.2)"}}},e.id))})]}),(0,r.jsx)("hr",{}),(0,r.jsx)(m.Z,{sx:{mt:1},children:"สี:"}),(0,r.jsxs)(h.Z,{sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},children:[(0,r.jsx)(h.Z,{sx:{width:"10rem",height:"3rem",bgcolor:B,transition:"0.2s",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.20)",mb:2,borderRadius:"5px"}}),(0,r.jsx)(p.Z,{variant:"outlined",value:B,label:"โค้ดสี",size:"small",type:"color",sx:{mt:1,mb:1},onChange:e=>{let s=e.target.value;I(s)},placeholder:"#RRGGBB หรือ #RGB"}),(0,r.jsx)(p.Z,{variant:"outlined",value:T,label:"ชื่อสี",size:"small",sx:{mt:1,mb:1},onChange:e=>q(e.target.value)}),(0,r.jsx)(p.Z,{variant:"outlined",value:O,label:"โค้ดเนม",size:"small",sx:{mt:1,mb:1},onChange:e=>U(e.target.value)}),(0,r.jsx)(g.Z,{variant:"contained",sx:{mt:1,mb:1,width:"34ch",m:1},onClick:J,children:"เพิ่ม"})]})]})]}),(0,r.jsxs)(u.ZP,{item:!0,xs:12,sm:5,children:[(0,r.jsx)(m.Z,{sx:{mt:1},children:"สีที่มีในแคตตาล็อก:"}),(0,r.jsx)(h.Z,{sx:{display:"flex",flexWrap:"wrap"},children:A&&A.map((e,s)=>(0,r.jsx)(j.Z,{arrow:!0,title:(0,r.jsxs)(w.Fragment,{children:[(0,r.jsxs)(m.Z,{color:"inherit",children:["โค้ดสี: ",e.code]}),(0,r.jsxs)(m.Z,{color:"inherit",children:["ชื่อสี: ",e.name]}),(0,r.jsxs)(m.Z,{color:"inherit",children:["โค้ดเนม: ",e.codename]})]}),children:(0,r.jsx)(h.Z,{sx:{bgcolor:e.code,width:"2rem",height:"3rem",cursor:"pointer",borderRadius:"100px",transition:"0.1s",boxShadow:"4px 4px 4px 0px rgba(0, 0, 0, 0.25)",m:1,":hover":{transform:"scale(1.2)"}}})},s))})]}),(0,r.jsx)(u.ZP,{item:!0,xs:12,children:(0,r.jsx)(g.Z,{variant:"contained",color:"success",sx:{mr:2,mb:2,mt:2},type:"submit",children:"แก้ไขแค็ตตาล็อก"})})]})})]})]})})}}},function(e){e.O(0,[2607,9078,7393,6298,6886,505,3717,3914,945,4792,6078,1667,8010,6679,9774,2888,179],function(){return e(e.s=67426)}),_N_E=e.O()}]);